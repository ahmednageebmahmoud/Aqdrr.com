{"version":3,"mappings":"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","names":["Invoice","SubscriptionPackageInvoice","PaymentStatus","ChargeReturn","ChargeStatus","InvoicesService","http","src_environments_environment__WEBPACK_IMPORTED_MODULE_1__","baseUrl","newInvoice","post","invoicesUrl","packageId","updatedInvoice","put","id","get","query","_utilities_service__WEBPACK_IMPORTED_MODULE_0__","_angular_core__WEBPACK_IMPORTED_MODULE_2__","factory","providedIn","PaymentsService","src_environments_environment__WEBPACK_IMPORTED_MODULE_0__","userId","stripeToken","chargeId","_angular_core__WEBPACK_IMPORTED_MODULE_1__","_angular_core__WEBPACK_IMPORTED_MODULE_10__","CheckoutComponent","cd","paymentsService","authService","location","route","urlService","subscriptionPackagesService","activatedRoute","router","alertify","appTranslation","appTitle","invoicesService","onChange","bind","src_app_models_payments_tab_company__WEBPACK_IMPORTED_MODULE_0__","previousUrl$","subscribe","previousUrl","style","base","color","lineHeight","fontFamily","fontSmoothing","fontSize","invalid","labels","cardNumber","expirationDate","cvv","cardHolder","paymentOptions","currencyCode","TextDirection","card","elements","create","mount","addEventListener","cardHandler","destroy","error","paramMap","has","navigate","paramPackageId","getSubscriptionPackageDetails","isLoadingData","getSubscriptionPackage","subscriptionPackageResult","subscriptionPackage","isFree","cardFormLoader","title","arTitle","categoryDescription","setTimeout","changeNavigationTitle","changeTabTitle","key","message","detectChanges","isSubmitting","onFreeSubscriptionPackage","onCreditCardSubscriptionPackage","freeSubscription","invoice","isPaid","tap","createToken","result","charge","currentUser","toString","res","console","log","paymentInvoice","chargeStatus","ChargeStatusEnum","INITIATED","window","href","chargeReturn","transaction","url","CAPTURED","Free","Other","chargeResponsiveCode","chargeResponsiveMessage","selectors","viewQuery","ctx","_angular_core__WEBPACK_IMPORTED_MODULE_11__","FreeSubscriptionResultComponent","permissions","paramInvoiceId","getInvoiceDetails","getInvoice","invoiceResult","status","src_app_models_invoices_Invoice__WEBPACK_IMPORTED_MODULE_0__","isPaidSucceeded","loggedIn","canApplyToTheJobs","canManageOrders","canManageJobs","canOrderService","decls","vars","consts","template","_angular_core__WEBPACK_IMPORTED_MODULE_12__","InvoiceDetailsComponent","src_app_models_settings_subscription_package__WEBPACK_IMPORTED_MODULE_2__","src_app_models_payments_tab_company__WEBPACK_IMPORTED_MODULE_1__","currentUserId","getCurrentUserIdUsingToken","Waiting","PaymentStatusEnum","Confirmed","Failed","confirmAfterRedirectFromPaymentGateway","isSubscriptionPackageInvoice","isChargeReturn","obj","subscriptionPackageId","outputs","viewedSuccessfully","_angular_core__WEBPACK_IMPORTED_MODULE_9__","InvoiceListComponent","queryStringBuilder","src_app_models_settings_subscription_package__WEBPACK_IMPORTED_MODULE_3__","src_app_models_invoices_Invoice__WEBPACK_IMPORTED_MODULE_1__","src_app_models_payments_tab_company__WEBPACK_IMPORTED_MODULE_2__","align","pageSize","PAGE_SIZE","getQueryParams","getAllInvoices","entityCaption","setQueryParams","getPagedInvoices","invoices","items","pagination","getWithValue","pageNumber","refreshCounter","filterText","resetFilter","info","columnName","sortBy","isSortAscending","event","src_app_helpers_animations_enter_leave__WEBPACK_IMPORTED_MODULE_0__","_angular_core__WEBPACK_IMPORTED_MODULE_0__","PaymentFailedComponent","inputs","errorMessage","PaymentResultComponent","queryParams","paramTapId","params","subscriptionPackageInvoice","response","code","PaymentSuccessComponent","_angular_core__WEBPACK_IMPORTED_MODULE_7__","routes","path","component","_test_payment_gate_test_payment_gate_component__WEBPACK_IMPORTED_MODULE_0__","_invoices_invoice_list_invoice_list_component__WEBPACK_IMPORTED_MODULE_2__","_invoices_invoice_details_invoice_details_component__WEBPACK_IMPORTED_MODULE_3__","_free_subscription_result_free_subscription_result_component__WEBPACK_IMPORTED_MODULE_5__","_payment_result_payment_result_component__WEBPACK_IMPORTED_MODULE_4__","_checkout_checkout_component__WEBPACK_IMPORTED_MODULE_1__","PaymentsRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_7__","imports","exports","PaymentsModule","_shared_shared_module__WEBPACK_IMPORTED_MODULE_0__","_payments_routing_module__WEBPACK_IMPORTED_MODULE_1__","declarations","_test_payment_gate_test_payment_gate_component__WEBPACK_IMPORTED_MODULE_2__","_checkout_checkout_component__WEBPACK_IMPORTED_MODULE_3__","_invoices_invoice_list_invoice_list_component__WEBPACK_IMPORTED_MODULE_4__","_invoices_invoice_details_invoice_details_component__WEBPACK_IMPORTED_MODULE_5__","_payment_success_payment_success_component__WEBPACK_IMPORTED_MODULE_6__","_payment_result_payment_result_component__WEBPACK_IMPORTED_MODULE_7__","_payment_failed_payment_failed_component__WEBPACK_IMPORTED_MODULE_8__","_free_subscription_result_free_subscription_result_component__WEBPACK_IMPORTED_MODULE_9__","_angular_core__WEBPACK_IMPORTED_MODULE_5__","TestPaymentGateComponent","chargeTest"],"sources":["webpack:///src/app/_models/invoices/Invoice.ts","webpack:///src/app/_models/payments/tab-company.ts","webpack:///src/app/_services/invoices/invoices.service.ts","webpack:///src/app/_services/invoices/payments.service.ts","webpack:///src/app/components/payments/checkout/checkout.component.html","webpack:///src/app/components/payments/checkout/checkout.component.ts","webpack:///src/app/components/payments/free-subscription-result/free-subscription-result.component.html","webpack:///src/app/components/payments/free-subscription-result/free-subscription-result.component.ts","webpack:///src/app/components/payments/invoices/invoice-details/invoice-details.component.html","webpack:///src/app/components/payments/invoices/invoice-details/invoice-details.component.ts","webpack:///src/app/components/payments/invoices/invoice-list/invoice-list.component.html","webpack:///src/app/components/payments/invoices/invoice-list/invoice-list.component.ts","webpack:///src/app/components/payments/payment-failed/payment-failed.component.html","webpack:///src/app/components/payments/payment-failed/payment-failed.component.ts","webpack:///src/app/components/payments/payment-result/payment-result.component.html","webpack:///src/app/components/payments/payment-result/payment-result.component.ts","webpack:///src/app/components/payments/payment-success/payment-success.component.ts","webpack:///src/app/components/payments/payment-success/payment-success.component.html","webpack:///src/app/components/payments/payments-routing.module.ts","webpack:///src/app/components/payments/payments.module.ts","webpack:///src/app/components/payments/test-payment-gate/test-payment-gate.component.html","webpack:///src/app/components/payments/test-payment-gate/test-payment-gate.component.ts"],"sourcesContent":["import { ChargeReturn, ChargeStatus } from \"../payments/tab-company\";\nimport { SubscriptionPackageReturn } from \"../settings/subscription-package\";\nimport { UserIdAndNameDto } from \"../Users/User\";\n\nexport class Invoice {\n}\n\n\nexport interface PaymentInvoice {\n  id: number;\n  updatedDate: Date | string;\n  createdDate: Date | string;\n  subscriptionPackageId: number;\n  subscriptionPackage: SubscriptionPackageReturn;\n  packagePrice: number;\n  employmentBags: number;\n  employmentBagsBalance: number;\n  totalDays: number;\n  isExpiry: boolean;\n  expiryDate: Date | string;\n  amount: number;\n  currency: string;\n  paymentDate: Date | string;\n  description: string;\n  status: PaymentStatus;\n  statusDescription: string;\n  chargeId: string;\n  redirectUrl: string;\n  receiptUrl: string;\n  chargeStatus: ChargeStatus;\n  chargeStatusDescription: string;\n  isPaid: boolean;\n  userId: number;\n  subscriber: UserIdAndNameDto;\n  chargeResponsiveCode: string;\n  chargeResponsiveMessage: string;\n}\n\nexport class SubscriptionPackageInvoice {\n  id: number;\n  subscriptionPackageId: number;\n  subscriptionPackage: SubscriptionPackageReturn;\n  employmentBags: number;\n  employmentBagsBalance: number;\n  totalDays: number;\n  isExpiry: boolean;\n  expiryDate: Date | string;\n  paymentDate: Date | string;\n  description: string;\n  status: PaymentStatus;\n  statusDescription: string;\n  chargeStatus: ChargeStatus;\n  chargeStatusDescription: string;\n  chargeStatusName: string;\n  isPaid: boolean;\n  userId: number;\n  chargeResponsiveCode: string;\n  chargeResponsiveMessage: string;\n}\n\nexport interface PaymentsResult {\n  chargeReturn: ChargeReturn;\n  paymentInvoice: PaymentInvoice;\n\n}\n\nexport enum PaymentStatus {\n    None = 0,\n    Waiting = 1,\n    Confirmed = 2,\n    Failed = 3,\n}\n","export interface Charge {\n  id: string;\n  object: string;\n  liveMode: boolean;\n  apiVersion: string;\n  method: string;\n  status: string;\n  amount: number;\n  currency: string;\n  threeDSecure: boolean;\n  cardThreeDSecure: boolean;\n  saveCard: boolean;\n  merchantId: string;\n  product: string;\n  statementDescriptor: string;\n  description: string;\n  metadata: MetadataInfo;\n  transaction: TransactionInfo;\n  reference: ReferenceInfo;\n  response: ResponseInfo;\n  card: CreditCardInfo;\n  receipt: ReceiptInfo;\n  customer: CustomerInfo;\n  merchant: MerchantInfo;\n  source: SourceInfo;\n  redirect: RedirectInfo;\n  post: PostInfo;\n}\n\nexport interface CreditCardInfo {\n  object: string;\n  firstSix: number;\n  lastFour: number;\n}\n\nexport interface CustomerInfo {\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  email: string;\n  phone: PhoneInfo;\n}\n\nexport interface ExpiryInfo {\n  period: number;\n  type: string;\n}\n\nexport interface MerchantInfo {\n  id: string;\n}\n\nexport interface MetadataInfo {\n  udf1: string;\n  udf2: string;\n}\n\nexport interface PhoneInfo {\n  countryCode: string;\n  number: string;\n}\n\nexport interface PostInfo {\n  status: string;\n  url: string;\n}\n\nexport interface ReceiptInfo {\n  email: boolean;\n  sms: boolean;\n}\n\nexport interface RedirectInfo {\n  status: string;\n  url: string;\n}\n\nexport interface ReferenceInfo {\n  transaction: string;\n  order: string;\n}\n\nexport interface ResponseInfo {\n  code: number;\n  message: string;\n}\n\nexport interface SourceInfo {\n  object: string;\n  id: string;\n}\n\nexport interface TransactionInfo {\n  timezone: string;\n  created: string;\n  url: string;\n  expiry: ExpiryInfo;\n  asynchronous: boolean;\n  amount: number;\n  currency: string;\n}\n\nexport class ChargeReturn {\n    id: string;\n    response: ResponseInfo;\n    status: string;\n    amount: number;\n    currency: string;\n    description: string;\n    transaction: TransactionInfo;\n    reference: ReferenceInfo;\n    card: CreditCardInfo;\n}\n\n\n\nexport enum ChargeStatus {\n    Waiting = 0,\n    Free = 1,\n    INITIATED = 2,\n    CAPTURED = 3,\n    Other = 4,\n}\n\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Utilities } from '../utilities.service';\nimport { KeyValuePairResource } from 'src/app/_models/data/key-value-pair-resource';\nimport { PaginationResult } from 'src/app/_models/data/Pagination';\nimport { SubscriptionPackageInvoice, Invoice, PaymentInvoice } from 'src/app/_models/invoices/Invoice';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InvoicesService {\n  baseUrl = environment.ApiUrl;\n  invoicesUrl = `${this.baseUrl}invoices`;\n\n  constructor(private http: HttpClient) { }\n\n  addNew(newInvoice: Invoice): Observable<any> {\n    return this.http.post<any>(`${this.invoicesUrl}`, newInvoice);\n  }\n\n  freeSubscription( packageId: number): Observable<SubscriptionPackageInvoice> {\n    return this.http.post<SubscriptionPackageInvoice>(`${this.invoicesUrl}/free/${packageId}`, null);\n  }\n\n  updateInvoice(updatedInvoice: Invoice): Observable<Invoice> {\n    return this.http.put<Invoice>(`${this.invoicesUrl}`, updatedInvoice);\n  }\n  getInvoice(id: number): Observable<PaymentInvoice> {\n    return this.http.get<PaymentInvoice>(`${this.invoicesUrl}/${id}`);\n  }\n  getInvoices(): Observable<Invoice[]> {\n    return this.http.get<Invoice[]>(this.invoicesUrl);\n  }\n  getPagedInvoices(query: any): Observable<PaginationResult<PaymentInvoice[]>> {\n    return Utilities.getPaginationResult<PaymentInvoice>(this.http, `${this.invoicesUrl}/Pages`, query);\n  }\n  getInvoicesAsList(query?: any): Observable<KeyValuePairResource[]> {\n    return this.http.get<KeyValuePairResource[]>(`${this.invoicesUrl}/list`);\n  }\n\n\n\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { PaymentsResult, SubscriptionPackageInvoice } from 'src/app/_models/invoices/Invoice';\nimport { ChargeReturn } from 'src/app/_models/payments/tab-company';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaymentsService {\n  baseUrl = environment.ApiUrl + 'users/';\n  constructor(private http: HttpClient) { }\n\n\n  chargeTest(userId: number, stripeToken: StringConstructor): Observable<ChargeReturn> {\n    return this.http.post<ChargeReturn>(`${this.baseUrl}${userId}/payments/charges/${stripeToken}/test`, {});\n  }\n\n\n  charge(userId: number, stripeToken: string, packageId: number): Observable<PaymentsResult> {\n    return this.http.post<PaymentsResult>(`${this.baseUrl}${userId}/payments/charges/${stripeToken}/packages/${packageId}`, {});\n  }\n\n  getPaymentForUser(userId: number) {\n    return this.http.get(`${this.baseUrl}${userId}/payment`);\n  }\n\n  confirmAfterRedirectFromPaymentGateway(userId: number, chargeId: string): Observable<any> {\n    return this.http.put<any>(`${this.baseUrl}${userId}/payments/charges/${chargeId}/confirm`, null);\n  }\n}\n","\n<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n  <div class=\"container\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n              <h2><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i>&nbsp;{{title}}</h2>\n          </div>\n          <ol>\n              \n              <li><a [routerLink]=\"['/settings']\">{{'Menu.Dashboard' | translate }}</a></li>\n          </ol>\n      </div>\n  </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n  <div class=\"container-fluid\">\n        <!-- ======= Nav Buttons Section ======= -->\n      <div class=\"container px-0\">\n          <div class=\"row\">\n\n            <div class=\"container-fluid px-1 px-md-2 px-lg-4 py-5 mx-auto\" [ngClass]=\"{'disabled-spinner-container': isLoadingData || cardFormLoader || isSubmitting}\">\n              <app-spinner-container *ngIf=\"isLoadingData || cardFormLoader\" class=\"spinner-container\"></app-spinner-container>\n              <div class=\"row d-flex justify-content-center\">\n                  <div class=\"col-xl-7 col-lg-8 col-md-9 col-sm-11\">\n                      <div class=\"card border-0\">\n                        <div class=\"card-body px-2 py-4\">\n                          <form #checkout=\"ngForm\" (ngSubmit)=\"onSubmit()\" class=\"container\">\n                            <div class=\"row justify-content-center\">\n                                <h3 class=\"mb-4 text-info text-center\">{{title}}</h3>\n                            </div>\n                            <div class=\"row\">\n\n                              <div class=\"col-sm-4 text-center justify-content-center align-content-center\" [ngClass]=\"{'col-sm-12': subscriptionPackage?.isFree}\">\n\n                                <!-- <small class=\"text-sm text-muted\"></small>\n                                <h5 class=\"mb-2\">{{subscriptionPackage.title}}</h5> -->\n                                <ng-container *ngIf=\"subscriptionPackage\">\n                                  <small class=\"text-sm text-muted\"> </small>\n                                  <div class=\"col-12 px-3 justify-content-sm-center\">\n                                    <h2 *ngIf=\"!subscriptionPackage?.isFree\"><span class=\"text-md font-weight-bold mr-2\">$</span><span class=\"text-info\">{{subscriptionPackage?.price}}</span></h2>\n                                    <h2 *ngIf=\"subscriptionPackage?.isFree\"><span class=\"text-info\">{{'SubscriptionPackages.IsFree' | translate}}</span></h2>\n                                  </div>\n                                </ng-container>\n\n                                <ng-container *ngIf=\"subscriptionPackage?.employmentBags > 0\">\n                                  <small class=\"text-sm text-muted\"> </small>\n                                  <h5 class=\"mb-2\">{{subscriptionPackage?.employmentBags}}</h5>\n                                </ng-container>\n\n                                <ng-container *ngIf=\"subscriptionPackage\">\n                                  <small class=\"text-sm text-muted\"> </small>\n                                  <h5 class=\"mb-2\">{{subscriptionPackage?.totalDays}} </h5>\n                                </ng-container>\n\n                              </div>\n\n                              <div *ngIf=\"!subscriptionPackage?.isFree\" class=\"col-sm-8 split-border pr-4 mt-3\">\n                                <!-- Tap element will be here -->\n                                <div id=\"card-info\" #cardInfo ></div>\n                                <div id=\"success\" style=\"display: none;position: relative;float: left;\">Success! Your token is <span id=\"token\"></span></div>\n                                <div class=\"alert alert-danger mx-2\" id=\"card-errors\" role=\"alert\" *ngIf=\"error\">{{ error }}</div>\n                              </div>\n                            </div>\n                            <div class=\"row justify-content-center\">\n                              <!-- Tap pay button -->\n                              <button class=\"btn w-50 btn-info mt-4\" id=\"tap-btn\" [disabled]=\"isSubmitting || isLoadingData || cardFormLoader\">\n                                <i class='fa ' [ngClass]=\"isSubmitting ? 'fa-circle-o-notch fa-spin' : 'fa-credit-card'\"></i>&nbsp;\n                                {{(isSubmitting ? 'Common.Data.SendingData' : 'SubscriptionPackages.Subscription') | translate}}&nbsp;\n                              </button>\n                            </div>\n                          </form>\n                        </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n\n\n\n          </div>\n      </div>\n  </div>\n</article>\n\n\n\n","import { Component, AfterViewInit, OnDestroy, ViewChild, ElementRef, ChangeDetectorRef, OnInit, Output, EventEmitter } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from 'src/app/_services/users/auth.service';\nimport { UserService } from 'src/app/_services/users/User.service';\nimport { SubscriptionPackageReturn } from 'src/app/_models/settings/subscription-package';\nimport { SubscriptionPackagesService } from 'src/app/_services/settings/subscription-packages.service';\nimport { UrlService } from 'src/app/_helpers/url.service';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { AppTitleService } from 'src/app/_helpers/app-title.service';\nimport { PaymentsService } from 'src/app/_services/invoices/payments.service';\nimport { SubscriptionPackageInvoice, PaymentsResult, PaymentStatus } from 'src/app/_models/invoices/Invoice';\nimport { ChargeStatus } from 'src/app/_models/payments/tab-company';\nimport { InvoicesService } from 'src/app/_services/invoices/invoices.service';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.css']\n})\nexport class CheckoutComponent implements OnInit, OnDestroy, AfterViewInit {\n  // Card Declare\n  @ViewChild('cardInfo') cardInfo: ElementRef;\n  card: any;\n  cardHandler = this.onChange.bind(this);\n  error: string;\n  successPaid: boolean = false;\n  cardFormLoader: boolean = true;\n\n  // Page Declare\n  title: string = '';\n  @Output() viewedSuccessfully: EventEmitter<SubscriptionPackageReturn> = new EventEmitter<SubscriptionPackageReturn>();\n  isLoadingData = true;\n  isSubmitting = false;\n  previousUrl: any;\n  subscriptionPackage: SubscriptionPackageReturn;\n  paramPackageId: number = 0;\n  currentUserId: number = 0;\n  ChargeStatusEnum = ChargeStatus;\n\n  constructor(private cd: ChangeDetectorRef, private paymentsService: PaymentsService,\n    public authService: AuthService, private location: Location, private route: ActivatedRoute,\n    private urlService: UrlService, private subscriptionPackagesService: SubscriptionPackagesService,\n    private activatedRoute: ActivatedRoute, private router: Router, private alertify: AlertifyService,\n    private appTranslation: AppTranslationService, private appTitle: AppTitleService, private invoicesService: InvoicesService) {\n    this.urlService.previousUrl$.subscribe((previousUrl: string) => {\n      if (previousUrl != null)\n        this.previousUrl = [`${previousUrl}`];\n      else\n        this.previousUrl = ['']\n    });\n  }\n\n  ngAfterViewInit() {\n\n    var style = {\n      base: {\n        color: '#535353',\n        lineHeight: '18px',\n        fontFamily: 'sans-serif',\n        fontSmoothing: 'antialiased',\n        fontSize: '16px',\n        '::placeholder': {\n          color: 'rgba(0, 0, 0, 0.26)',\n          fontSize: '15px'\n        }\n      },\n      invalid: {\n        color: 'red'\n      }\n    };\n\n    var labels = {\n      cardNumber: \" \",\n      expirationDate: \"MM/YY | /\",\n      cvv: \"CVV \",\n      cardHolder: \"  \"\n    };\n\n    //payment options\n    var paymentOptions = {\n      currencyCode: [\"SAR\"],\n      labels: labels,\n      TextDirection: 'rtl'\n    }\n\n    //create element, pass style and payment options\n    this.card = elements.create('card', { style: style }, paymentOptions);\n    //mount element\n    this.card.mount('#card-info');\n    // this.card.mount(this.cardInfo.nativeElement);\n    this.card.addEventListener('change', this.cardHandler, true);\n\n\n  }\n\n  ngOnDestroy() {\n    try {\n      // this.card.removeEventListener('change', this.cardHandler, true);\n      this.card.destroy();\n    } catch (error) {\n\n    }\n  }\n\n  ngOnInit(): void {\n    this.activatedRoute.paramMap.subscribe(paramMap => {\n      if (!paramMap.has('packageId') || +paramMap.get('packageId') == 0) {\n        this.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n        this.router.navigate([this.previousUrl]);\n        return;\n      }\n      this.paramPackageId = +paramMap.get('packageId');\n      this.getSubscriptionPackageDetails();\n    });\n  }\n\n\n  getSubscriptionPackageDetails() {\n    this.isLoadingData = true;\n    this.subscriptionPackagesService.getSubscriptionPackage(this.paramPackageId).subscribe(\n      (subscriptionPackageResult: SubscriptionPackageReturn) => {\n        this.subscriptionPackage = subscriptionPackageResult;\n        if (subscriptionPackageResult.isFree)\n          this.cardFormLoader = false;\n      },\n      error => {\n        this.alertify.error(error);\n        this.isLoadingData = false;\n        this.router.navigate([this.previousUrl]);\n      },\n      () => {\n        this.title = `  ${this.subscriptionPackage.arTitle} (${this.subscriptionPackage.categoryDescription})`;\n        setTimeout(() => {\n          this.appTitle.changeNavigationTitle(`  ${this.subscriptionPackage.arTitle}`, ``);\n          this.appTitle.changeTabTitle(`   ${this.subscriptionPackage.arTitle}`);\n        }, 0);\n        this.isLoadingData = false;\n      }\n    );\n  }\n\n  //card change event listener\n  onChange({ error }) {\n    this.cardFormLoader = false;\n    if (error) {\n      if (error.key === 'error_invalid_cvv_characters')\n        this.error = \"\"\n      else if (error.key === \"error_invalid_card_characters\")\n        this.error = \"   \"\n      else if (error.key === \"Your card's security code is incomplete.\")\n        this.error = \"    \"\n      else if (error.key === \"card_number_required\")\n        this.error = \"       \"\n      else if (error.key === \"error_invalid_card\")\n        this.error = \"      \"\n      else\n        this.error = error.message;\n    } else {\n      this.error = null;\n    }\n    this.cd.detectChanges();\n  }\n\n  async onSubmit() {\n    this.isSubmitting = true;\n    if (this.subscriptionPackage.isFree === true) {\n      this.onFreeSubscriptionPackage();\n    } else {\n      this.onCreditCardSubscriptionPackage();\n    }\n  }\n\n  //        \n  async onFreeSubscriptionPackage() {\n    this.invoicesService.freeSubscription(this.paramPackageId).subscribe(\n      (invoice: SubscriptionPackageInvoice) => {\n        if (invoice.isPaid === true)\n          this.router.navigate(['/payments', 'checkout', 'free-subscription', invoice.id]);\n        else\n          this.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n      },\n      error => {\n        this.alertify.error(error);\n        this.isSubmitting = false;\n      },\n      () => { this.isSubmitting = false; }\n    );\n  }\n\n  //      \n  async onCreditCardSubscriptionPackage() {\n    const result = await tap.createToken(this.card);\n    if (result.error) {\n      this.error = `   : \\n ${result.error.message}`;\n      this.isSubmitting = false;\n    } else {\n      // console.log('success token: ', result.id);\n      this.error = '';\n      this.paymentsService.charge(this.authService.currentUser.id, result.id.toString(), this.paramPackageId).subscribe(\n        (res: PaymentsResult) => {\n          console.log(res);\n          if (<ChargeStatus>res.paymentInvoice.chargeStatus === <ChargeStatus>this.ChargeStatusEnum.INITIATED)\n            window.location.href = res.chargeReturn.transaction.url;\n          else if (<ChargeStatus>res.paymentInvoice.chargeStatus === <ChargeStatus>this.ChargeStatusEnum.CAPTURED)\n            this.router.navigate(['/payments', 'checkout', 'gateway-result',  res.chargeReturn.id]);\n          else if (<ChargeStatus>res.paymentInvoice.chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Free)\n            this.router.navigate(['/payments', 'checkout', 'free-subscription', res.paymentInvoice.id]);\n          else if (<ChargeStatus>res.paymentInvoice.chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Other) {\n            this.alertify.error(`Error: ${res.paymentInvoice.chargeResponsiveCode} <br>${res.paymentInvoice.chargeResponsiveMessage}`);\n            this.error = `Error: ${res.paymentInvoice.chargeResponsiveCode} <br>${res.paymentInvoice.chargeResponsiveMessage}`;\n            this.isSubmitting = false;\n          }\n          else {\n            this.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n            this.isSubmitting = false;\n          }\n        },\n        error => {\n          this.alertify.error(error);\n          this.isSubmitting = false;\n          // this.router.navigate(['']);\n        },\n      )\n    }\n  }\n\n}\n","\n<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n  <div class=\"container\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n              <h2><i class=\"fa fa-credit-card-alt\" aria-hidden=\"true\"></i>&nbsp;{{'Invoices.Status' | translate }}</h2>\n          </div>\n          <ol>\n              \n              <li><span class=\"text-muted\" >{{'Invoices.Status' | translate }}</span></li>\n          </ol>\n      </div>\n  </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n  <div class=\"container-fluid\" [ngClass]=\"{'disabled-spinner-container': isLoadingData || isSubmitting}\">\n    <app-spinner-container [textClass]=\"'h4'\" [waitingText]=\"'Payments.Waiting' | translate \"  *ngIf=\"isLoadingData\" ></app-spinner-container>\n    <app-payment-success *ngIf=\"this.isPaidSucceeded === true\"></app-payment-success>\n    <app-payment-failed *ngIf=\"this.isPaidSucceeded === false\" [errorMessage]=\"message\"></app-payment-failed>\n  </div>\n</article>\n\n\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { AppTitleService } from 'src/app/_helpers/app-title.service';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { PermissionsService } from 'src/app/_helpers/permissions.service';\nimport { UrlService } from 'src/app/_helpers/url.service';\nimport { SubscriptionPackageInvoice, PaymentStatus, PaymentInvoice } from 'src/app/_models/invoices/Invoice';\nimport { ChargeReturn } from 'src/app/_models/payments/tab-company';\nimport { InvoicesService } from 'src/app/_services/invoices/invoices.service';\nimport { PaymentsService } from 'src/app/_services/invoices/payments.service';\nimport { AuthService } from 'src/app/_services/users/auth.service';\n\n@Component({\n  selector: 'app-free-subscription-result',\n  templateUrl: './free-subscription-result.component.html',\n  styleUrls: []\n})\nexport class FreeSubscriptionResultComponent implements OnInit {\n  isLoadingData = true;\n  isSubmitting = false;\n  previousUrl: any;\n  paramInvoiceId: number = 0;\n  currentUserId: number = 0;\n  isPaidSucceeded = null;\n  message = null;\n  invoice: PaymentInvoice;\n\n  constructor(private invoicesService: InvoicesService, public authService: AuthService, private route: ActivatedRoute,\n    private urlService: UrlService, private activatedRoute: ActivatedRoute, private router: Router, private alertify: AlertifyService,\n    private appTranslation: AppTranslationService, private appTitle: AppTitleService, private permissions: PermissionsService) {\n\n  }\n\n  ngOnInit(): void {\n    this.activatedRoute.paramMap.subscribe(paramMap => {\n      if (!paramMap.has('invoiceId') || +paramMap.get('invoiceId') == 0) {\n        this.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n        this.router.navigate(['']);\n        return;\n      }\n      this.paramInvoiceId = +paramMap.get('invoiceId');\n      this.getInvoiceDetails();\n    });\n  }\n\n\n  getInvoiceDetails() {\n    this.isLoadingData = true;\n    this.invoicesService.getInvoice(this.paramInvoiceId).subscribe((invoiceResult: PaymentInvoice) => {\n      if (invoiceResult.status === PaymentStatus.Confirmed)\n        this.isPaidSucceeded = true;\n      else {\n        this.isPaidSucceeded = false;\n        this.message = `${invoiceResult.chargeResponsiveCode} - ${invoiceResult.chargeResponsiveMessage}`;\n      }\n    },\n      error => {\n        this.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n        this.isLoadingData = false;\n      },\n      () => {\n        this.isLoadingData = false;\n      }\n    );\n  }\n\n\n  startNow() {\n    if (this.authService.loggedIn()) {\n      if (this.permissions.canApplyToTheJobs)\n        this.router.navigate(['/jobs']);\n      else if (this.permissions.canManageOrders)\n        this.router.navigate(['/profile']);\n      else if (this.permissions.canManageJobs)\n        this.router.navigate(['/jobs/new']);\n      else if (this.permissions.canOrderService)\n        this.router.navigate(['/taskers/list']);\n      else\n        this.router.navigate(['/']);\n    } else {\n      this.router.navigate(['/register']);\n    }\n  }\n}\n\n\n\n","\n<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n  <div class=\"container\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n            <h2><i class=\"fa fa-list-alt\" aria-hidden=\"true\"></i>&nbsp;{{'Invoices.Id' | translate }}: # </h2>\n          </div>\n          <ol>\n            \n            <li><a [routerLink]=\"['/payments' , 'invoices' , 'list']\">{{'Invoices.invoiceCaption' | translate }}</a></li>\n            <li><span class=\"text-muted\" >{{'Invoices.ViwInvoiceTitle' | translate }}</span></li>\n          </ol>\n      </div>\n  </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n  <div class=\"container\" [ngClass]=\"{'disabled-spinner-container': isLoadingData}\">\n    <app-spinner-container *ngIf=\"isLoadingData\" class=\"spinner-container\"></app-spinner-container>\n      <!-- begin invoice Collapse Card -->\n      <div class=\"card\">\n        <div id=\"invoice-body\" class=\" p-3\">\n          <div class=\"card-block text-left\">\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.Id' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\">{{invoice?.id}}</p>\n              </div>\n            </div>\n\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.Description' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\">{{invoice?.description}}</p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.UserId' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><strong><a *ngIf=\"invoice\" class=\"text-primary font-weight-bold\" [routerLink]=\"['/profile/' , invoice?.userId]\">[{{invoice?.userId}}] {{invoice?.subscriber?.fullName || invoice.subscriber?.userName}}</a></strong></p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Common.Data.LastUpdate' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\" *ngIf=\"invoice\">{{invoice?.updatedDate | date:'yyyy/MM/dd hh:mm'}}</p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.CreatedDate' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\" *ngIf=\"invoice\">{{invoice?.createdDate | date:'yyyy/MM/dd hh:mm'}}</p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.PaymentDate' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\" *ngIf=\"invoice\">{{invoice?.paymentDate | date:'yyyy/MM/dd hh:mm'}}</p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.SubscriptionPackageId' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><a  *ngIf=\"invoice\" class=\"text-info\" [routerLink]=\"['/subscription-packages' , invoice?.subscriptionPackageId , 'details']\"><strong>{{invoice?.subscriptionPackage?.title}}</strong> </a></p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.PackagePrice' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\">\n                  <span><strong *ngIf=\"invoice\">{{invoice?.packagePrice | number:'1.1-2'}}</strong>  </span>\n                  <span> <strong *ngIf=\"invoice\">{{invoice?.totalDays}}</strong> </span>\n                </p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\" *ngIf=\"invoice && invoice.subscriptionPackage?.category === PackageCategoryEnum.Business\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.EmploymentBags' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><strong>{{'Invoices.EmploymentBagsBalance' | translate}}:</strong><span *ngIf=\"invoice &&  invoice.subscriptionPackage?.category === PackageCategoryEnum.Business\" class=\"badge badge-pill badge-info text-light\">{{invoice?.employmentBagsBalance}}  {{invoice?.subscriptionPackage?.employmentBags}}</span></p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\" *ngIf=\"invoice && invoice?.status === PaymentStatusEnum.Confirmed\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.IsExpiry' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\">\n                  <i class=\"fa\" *ngIf=\"invoice\" [ngClass]=\"invoice.isExpiry === true ? 'fa-times-circle text-danger' : 'fa-check-circle text-success'\"></i>\n                  <span class=\"text-success\" *ngIf=\"invoice && invoice.isExpiry === false\"> {{'Invoices.Valid' | translate }}</span>\n                  <span class=\"text-danger\" *ngIf=\"invoice && invoice.isExpiry === true\"> {{'Invoices.Expired' | translate }}</span>\n                </p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\" *ngIf=\"invoice && invoice?.status === PaymentStatusEnum.Confirmed\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.ExpiryDate' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\" >{{invoice?.expiryDate | date:'yyyy/MM/dd'}}</p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.Status' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><i class=\"fa\"  *ngIf=\"invoice\" [ngClass]=\"getPaymentStatusIconStyle(invoice?.chargeStatus)\"></i> {{invoice?.chargeStatusDescription}}</p>\n              </div>\n            </div>\n            <hr>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.ChargeId' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><span *ngIf=\"invoice\" class=\"badge badge-pill badge-warning text-dark\">{{invoice?.chargeId}}</span></p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.IsPaid' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><i class=\"fa\" [ngClass]=\"invoice?.isPaid ? 'fa fa-check-circle text-success' : 'fa fa-ban text-danger'\"></i> </p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.ChargeStatusName' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\"><i class=\"fa\" [ngClass]=\"getPaymentStatusIconStyle(invoice?.status)\"></i> {{invoice?.statusDescription}}</p>\n              </div>\n            </div>\n\n\n            <div class=\"form-row mb-2\" *ngIf=\"permissions.canManageInvoices\" >\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.ChargeResponsiveCode' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\">{{invoice?.chargeResponsiveCode}}<span *ngIf=\"invoice && invoice?.status !== PaymentStatusEnum.Confirmed\"> | </span>\n                <a *ngIf=\"invoice && invoice?.status !== PaymentStatusEnum.Confirmed\" href=\"https://tappayments.api-docs.io/2.0/response-codes/http-status-code-summary\" target=\"_blank\">  </a></p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\" *ngIf=\"permissions.canManageInvoices\">\n              <label class=\"col-4 h6 mb-0\"><i class=\"fa fa-plus\"></i>&nbsp;{{'Invoices.ChargeResponsiveMessage' | translate }}</label>\n              <div class=\"col-8\">\n                <p class=\"h6 mb-0\">{{invoice?.chargeResponsiveMessage}}</p>\n              </div>\n            </div>\n            <div class=\"form-row mb-2\" *ngIf=\"permissions.canManageInvoices\">\n              <button *ngIf=\"invoice && invoice.chargeStatus !== ChargeStatusEnum.Free\" type=\"button\" class=\"btn btn-primary btn-sm btn-block\" (click)=\"checkPaymentGatewayForThisCharge(invoice.chargeStatus, invoice.chargeId)\"  [disabled]=\"isSubmitting\">\n                <i class='fa ' [ngClass]=\"isSubmitting ? 'fa-circle-o-notch fa-spin' : 'fa-repeat'\"></i>&nbsp;\n                {{(isSubmitting ? 'Common.Data.SendingData' : 'Invoices.CheckPayment') | translate}}&nbsp;\n              </button>\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n      <!-- end invoice Collapse Card -->\n\n\n  </div>\n</article>\n\n\n\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { AppTitleService } from 'src/app/_helpers/app-title.service';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { PermissionsService } from 'src/app/_helpers/permissions.service';\nimport { UrlService } from 'src/app/_helpers/url.service';\nimport { Invoice, PaymentInvoice, PaymentStatus, SubscriptionPackageInvoice } from 'src/app/_models/invoices/Invoice';\nimport { ChargeReturn, ChargeStatus } from 'src/app/_models/payments/tab-company';\nimport { PackageCategory } from 'src/app/_models/settings/subscription-package';\nimport { InvoicesService } from 'src/app/_services/invoices/invoices.service';\nimport { PaymentsService } from 'src/app/_services/invoices/payments.service';\nimport { AuthService } from 'src/app/_services/users/auth.service';\n\n@Component({\n  selector: 'app-invoice-details',\n  templateUrl: './invoice-details.component.html',\n  styleUrls: []\n})\nexport class InvoiceDetailsComponent implements OnInit {\n\tisLoadingData = true;\n\tisSubmitting = false;\n\tcurrentUserId: number = 0;\n\tpreviousUrl: any;\n\t@Output() viewedSuccessfully: EventEmitter<Invoice> = new EventEmitter<Invoice>();\n\tinvoice: PaymentInvoice;\n\tparamInvoiceId: number = 0;\n  PackageCategoryEnum = PackageCategory;\n  PaymentStatusEnum = PaymentStatus;\n  ChargeStatusEnum = ChargeStatus;\n\n\n\tconstructor(private appTranslation: AppTranslationService,\n\t\tprivate router: Router, private activatedRoute: ActivatedRoute, private urlService: UrlService,\n\t\tpublic authService: AuthService, public permissions: PermissionsService,\n\t\tprivate appTitle: AppTitleService, private alertify: AlertifyService,\n\t\tprivate invoicesService: InvoicesService, private paymentsService: PaymentsService) {\n\t\tthis.urlService.previousUrl$.subscribe((previousUrl: string) => {\n\t\tif (previousUrl != null)\n\t\t\tthis.previousUrl = [`${previousUrl}`];\n\t\telse\n\t\t\tthis.previousUrl = ['/invoices']\n\t\t});\n\t}\n\n\tngOnInit(): void {\n\t\ttry { this.currentUserId = this.authService.getCurrentUserIdUsingToken(); } catch (error) { console.log('anonymous user'); }\n\t\tthis.activatedRoute.paramMap.subscribe(paramMap => {\n\t\t\tif (!paramMap.has('invoiceId') || +paramMap.get('invoiceId') == 0) {\n\t\t\t\tthis.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n\t\t\t\tthis.router.navigate([this.previousUrl]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.paramInvoiceId = +paramMap.get('invoiceId');\n\t\t\tthis.getInvoiceDetails();\n\t\t});\n\t}\n\n\tgetInvoiceDetails() {\n\t\tthis.isLoadingData = true;\n\t\tthis.invoicesService.getInvoice(this.paramInvoiceId).subscribe((invoiceResult: PaymentInvoice) => {\n\t\t\tthis.invoice = invoiceResult;\n\t\t},\n\t\t\terror => {\n\t\t\t\tthis.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'));\n\t\t\t\tthis.isLoadingData = false;\n\t\t\t\tthis.router.navigate([this.previousUrl]);\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.appTitle.changeNavigationTitle(`  #${this.paramInvoiceId}`, ``);\n\t\t\t\t\tthis.appTitle.changeTabTitle(`  #${this.paramInvoiceId}`);\n\t\t\t\t}, 0);\n\t\t\t\tthis.isLoadingData = false;\n\t\t\t}\n\t\t);\n\t}\n\n\n  getChargeStatusEnumIconStyle(chargeStatus: ChargeStatus) {\n    if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.CAPTURED || <ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Free) {\n      return 'fa fa-check-circle text-success';\n    } else if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Other) {\n      return 'fa fa-ban text-warning';\n    } else if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Waiting) {\n      return 'fa fa-clock-o text-primary';\n    } else if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.INITIATED) {\n      return 'fa fa-retweet text-primary';\n    }\n    else { return 'fa fa-info text-info' }\n  }\n\n  getPaymentStatusIconStyle(status: PaymentStatus) {\n    if (<PaymentStatus>status === <PaymentStatus>this.PaymentStatusEnum.Confirmed) {\n      return 'fa fa-check-circle text-success';\n    } else if (<PaymentStatus>status === <PaymentStatus>this.PaymentStatusEnum.Failed) {\n      return 'fa fa-ban text-danger';\n    } else if (<PaymentStatus>status === <PaymentStatus>this.PaymentStatusEnum.Waiting) {\n      return 'fa fa-clock-o text-primary';\n    }\n    else { return 'fa fa-info text-info' }\n  }\n\n\n  checkPaymentGatewayForThisCharge(chargeStatus: ChargeStatus, chargeId: string,) {\n\t\t\tthis.isSubmitting = true;\n      this.paymentsService.confirmAfterRedirectFromPaymentGateway(this.authService.currentUser.id, chargeId).subscribe(\n        (result: any) => {\n          console.log('the Object  :', result);\n          if (this.isSubscriptionPackageInvoice(result)) {\n            console.log('invoice :', result);\n          }\n          if (this.isChargeReturn(result)) {\n            console.log('Charge :', result);\n          }\n        },\n        error => {\n          this.alertify.error(error);\n          this.isSubmitting = false;\n        },\n        () => { this.isSubmitting = false; }\n      );\n  }\n\n\n  isSubscriptionPackageInvoice(obj: any): obj is SubscriptionPackageInvoice {\n    return typeof obj.subscriptionPackageId === 'number';\n  }\n\n  isChargeReturn(obj: any): obj is ChargeReturn {\n    return typeof obj.status === 'string';\n  }\n\n}\n","\n<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n  <div class=\"container\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n            <h2><i class=\"fa fa-book\" aria-hidden=\"true\"></i>&nbsp;{{'Invoices.invoiceCaption' | translate }}</h2>\n          </div>\n          <ol>\n            \n            <li><span class=\"text-muted\" >{{'Invoices.invoiceCaption' | translate }}</span></li>\n          </ol>\n      </div>\n  </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n  <div class=\"container-fluid\">\n\n    <div class=\"d-sm-flex flex-wrap justify-content-between p-2 mb-2 border rounded-lg bg-light\" >\n      <div class=\"form-inline\">\n        <div class=\"input-group input-group-sm\">\n          <input type=\"text\" class=\"form-control\" maxlength=\"30\" [(ngModel)]=\"query.filterText\" (keyup.esc)=\"resetFilter()\" (keyup.enter)=\"onFilterChange()\" placeholder=\"{{'Common.Data.SearchTip' | translate}}\">\n          <div class=\"input-group-append\" id=\"button-addon4\">\n            <button id=\"btnResetFilter\" class=\"btn btn-danger\" type=\"button\" (click)=\"resetFilter()\" title=\"{{'Common.Data.Reset' | translate}}\"><i class=\"fa fa-remove\"></i></button>\n          </div>\n        </div>\n      </div>\n      <div class=\"mb-2\"></div>\n      <div class=\"btn-group\">\n        <button id=\"btnRefreshData\" type=\"button\" class=\"btn btn-sm btn-light border btn-vertical\" (click)=\"refreshData()\">\n          <i class=\"fa fa-refresh text-success\" title=\"{{'Common.Data.Refresh' | translate}}\"></i>\n          <div>{{'Common.Data.Refresh' | translate}}</div>\n        </button>\n      </div>\n    </div>\n\n    <div [ngClass]=\"{'disabled-spinner-container': isLoadingData}\">\n      <app-spinner-container *ngIf=\"isLoadingData\" class=\"spinner-container\"></app-spinner-container>\n      <div class=\"table-responsive table-sm-vertical\">\n        <table class=\"table table-sm table-bordered table-striped table-light\">\n          <thead class=\"table-info\">\n            <tr>\n              <th *ngFor=\"let c of columns\" class=\"{{c.style}}\">\n                <div *ngIf=\"c.isSortable\" class=\"align-middle text-{{c.align}} \" (click)=\"sortBy(c.key)\">\n                  {{ c.title }}\n                  <i *ngIf=\"query.sortBy === c.key\"\n                    class=\"fa \"\n                    [class.fa-sort-asc]=\"query.isSortAscending\"\n                    [class.fa-sort-desc]=\"!query.isSortAscending\"></i>\n                </div>\n                <div *ngIf=\"!c.isSortable\" class=\"align-middle text-{{c.align}}\">\n                  {{ c.title }}\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tfoot>\n            <tr class=\"table-info\">\n              <th colspan='100%' class=\"text-center\" >{{'Common.Data.ResultsFound' | translate }} [ {{query.totalItems || '0' }} ] </th>\n            </tr>\n          </tfoot>\n          <tbody>\n            <tr *ngIf=\"!invoices?.length\">\n              <th colspan='100%' class=\"text-center\" >\n                <div class=\"container d-flex h-100\">\n                  <div class=\"row align-self-center justify-content-center w-100\">\n                    <div class=\"d-flex flex-column bd-highlight\">\n                      <div class=\"text-center\">\n                        <span class=\"fa-stack fa-3x\">\n                          <i class=\"fa fa-sticky-note-o fa-stack-1x text-primary\"></i>\n                          <i class=\"fa fa-ban fa-stack-2x text-gold\"></i>\n                        </span>\n                      </div>\n                      <div class=\"text-center mt-2 text-info\">\n                        <h5>{{'Common.Messages.NotFoundAnyRecord' | translate:{'value': 'Common.Data.Record' | translate} }}</h5>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </th>\n            </tr>\n            <tr *ngFor=\"let invoice of invoices; let i=index\" [@EnterItem]=\"{value:'', params:{delay: 100 * i}}\">\n              <td [attr.data-title]=\"columns[0]?.title\" class=\"align-middle text-center \">\n                <a class=\"text-info\" [routerLink]=\"[ '/payments', 'invoices' , invoice?.id , 'details']\">{{invoice.id}}</a>\n              </td>\n              <td [attr.data-title]=\"columns[1]?.title\" class=\"align-middle text-left \">\n                <div>{{invoice.description}}</div>\n                <div class=\"badge badge-pill badge-info text-light\">\n                  <a class=\"text-light\" [routerLink]=\"['/subscription-packages' , invoice?.subscriptionPackageId , 'details']\"><strong>{{'Invoices.SubscriptionPackageId' | translate}}:</strong> {{invoice.subscriptionPackage?.title}}</a>\n                </div>\n                <div class=\"small\" *ngIf=\"invoice.subscriptionPackage?.category === PackageCategoryEnum.Business\">\n                  <strong>{{'Invoices.EmploymentBagsBalance' | translate}}:</strong><span *ngIf=\"invoice.subscriptionPackage?.category === PackageCategoryEnum.Business\" class=\"badge badge-pill badge-info text-light\">{{invoice.employmentBagsBalance}}  {{invoice.subscriptionPackage?.employmentBags}}</span>\n                </div>\n                <div class=\"small\"><strong><a class=\"text-primary font-weight-bold\" [routerLink]=\"['/profile/' , invoice.userId]\">[{{invoice.userId}}] {{invoice.subscriber?.fullName || invoice.subscriber?.userName}}</a></strong></div>\n              </td>\n              <td [attr.data-title]=\"columns[2]?.title\" class=\"align-middle text-left \">\n                <div class=\"badge badge-pill badge-warning text-dark\">{{invoice.chargeId}}</div>\n                <div class=\"small\"><strong>{{'Invoices.ChargeStatus' | translate}}: </strong><i class=\"fa\" [ngClass]=\"getChargeStatusEnumIconStyle(invoice?.chargeStatus)\"></i> {{invoice.chargeStatusDescription}}</div>\n                <div class=\"small\"><strong>{{'Invoices.CreatedDate' | translate}}:</strong> {{invoice.createdDate| date:'yyyy/MM/dd hh:mm'}}</div>\n                <div class=\"small\"><strong>{{'Common.Data.LastUpdate' | translate}}:</strong> {{invoice.updatedDate| date:'yyyy/MM/dd hh:mm'}}</div>\n              </td>\n              <td [attr.data-title]=\"columns[3]?.title\" class=\"align-middle text-center \">\n                <div>\n                  <span><strong>{{invoice.packagePrice | number:'1.1-2'}}</strong>  </span>\n                  <span> <strong>{{invoice.totalDays}}</strong> </span>\n                </div>\n                <hr class=\"m-0 py-1 p-0\">\n                <div class=\"small text-left\"><strong>{{'Invoices.IsPaid' | translate}}:</strong></div>\n                <div class=\"small text-left\"><i class=\"fa\" [ngClass]=\"getPaymentStatusIconStyle(invoice?.status)\"></i> {{invoice.statusDescription}}</div>\n              </td>\n              <td [attr.data-title]=\"columns[4]?.title\" class=\"align-middle text-center \">\n                <ng-container *ngIf=\"invoice?.status === PaymentStatusEnum.Confirmed\">\n                  <div class=\"\"><span class=\"badge badge-pill badge-primary\" >{{invoice.expiryDate | date:'yyyy/MM/dd'}}</span></div>\n                  <div class=\"small\"><strong>{{'Invoices.IsExpiry' | translate}}:</strong>\n                    <div class=\"badge badge-xl align-middle text-left\">\n                      <i class=\"fa\" *ngIf=\"invoice\" [ngClass]=\"invoice.isExpiry === true ? 'fa-times-circle text-danger' : 'fa-check-circle text-success'\"></i>\n                      <span class=\"text-success\" *ngIf=\"invoice && invoice.isExpiry === false\"> {{'Invoices.Valid' | translate }}</span>\n                      <span class=\"text-danger\" *ngIf=\"invoice && invoice.isExpiry === true\"> {{'Invoices.Expired' | translate }}</span>\n                    </div>\n                  </div>\n                </ng-container>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <ngb-pagination class=\"d-flex justify-content-center\" [boundaryLinks]=\"true\" [pageSize]=\"query.pageSize\" [collectionSize]=\"query.totalItems\"\n              [(page)]=\"query.pageNumber\"  [maxSize]=\"5\" [rotate]=\"true\" (pageChange)=\"onPageChange($event);\">\n          <ng-template ngbPaginationFirst>&laquo;</ng-template>\n          <ng-template ngbPaginationPrevious>&lsaquo;</ng-template>\n          <ng-template ngbPaginationLast>&raquo;</ng-template>\n          <ng-template ngbPaginationNext>&rsaquo;</ng-template>\n      </ngb-pagination>\n\n    </div>\n\n  </div>\n</article>\n\n\n\n\n\n","import { Component, OnInit } from \"@angular/core\";\nimport { NgbPopover } from \"@ng-bootstrap/ng-bootstrap\";\nimport { AlertifyService } from \"src/app/_helpers/Alertify\";\nimport { enterItem } from \"src/app/_helpers/animations/enter-leave\";\nimport { AppTranslationService } from \"src/app/_helpers/app-translation\";\nimport { QueryStringBuilder } from \"src/app/_helpers/url/query-string-builder\";\nimport { Column, Pagination, PaginationResult } from \"src/app/_models/data/Pagination\";\nimport { Invoice, PaymentInvoice, PaymentStatus } from \"src/app/_models/invoices/Invoice\";\nimport { ChargeStatus } from \"src/app/_models/payments/tab-company\";\nimport { PackageCategory } from \"src/app/_models/settings/subscription-package\";\nimport { InvoicesService } from \"src/app/_services/invoices/invoices.service\";\n\n@Component({\n  selector: 'app-invoice-list',\n  templateUrl: './invoice-list.component.html',\n  styleUrls: [],\n  animations: [enterItem]\n})\nexport class InvoiceListComponent implements OnInit {\n  isLoadingData = true;\n  invoices: Invoice[];\n  PackageCategoryEnum = PackageCategory;\n  PaymentStatusEnum = PaymentStatus;\n  ChargeStatusEnum = ChargeStatus;\n\n  columns: Column[] = <Column[]>[\n    { title: this.appTranslation.get('Invoices.Id'), align: 'center', key: 'id' },\n    { title: this.appTranslation.get('Invoices.Description'), align: 'center', key: 'description' },\n    { title: this.appTranslation.get('Invoices.ChargeId'), align: 'center', key: 'chargeId' },\n    { title: this.appTranslation.get('Invoices.PackagePrice'), align: 'center', key: 'packagePrice' },\n    { title: this.appTranslation.get('Invoices.ExpiryDate'), align: 'center', key: 'totalDays' },\n  ];\n  entityCaption: string;\n  private readonly PAGE_SIZE = 10;\n  query: Pagination = <Pagination>{ pageSize: this.PAGE_SIZE };\n\n\n  constructor(private appTranslation: AppTranslationService,\n    private alertify: AlertifyService,\n    private invoicesService: InvoicesService,\n    private queryStringBuilder: QueryStringBuilder<Pagination>) {\n\n    queryStringBuilder.getQueryParams(this.query);\n  }\n\n  ngOnInit(): void {\n    this.getAllInvoices();\n    this.entityCaption = this.appTranslation.get(this.appTranslation.get('Invoices.invoiceCaption'));\n  }\n\n  getChargeStatusEnumIconStyle(chargeStatus: ChargeStatus) {\n    if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.CAPTURED || <ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Free) {\n      return 'fa fa-check-circle text-success';\n    } else if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Other) {\n      return 'fa fa-ban text-warning';\n    } else if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.Waiting) {\n      return 'fa fa-clock-o text-primary';\n    } else if (<ChargeStatus>chargeStatus === <ChargeStatus>this.ChargeStatusEnum.INITIATED) {\n      return 'fa fa-retweet text-primary';\n    }\n    else { return 'fa fa-info text-info' }\n  }\n\n  getPaymentStatusIconStyle(status: PaymentStatus) {\n    if (<PaymentStatus>status === <PaymentStatus>this.PaymentStatusEnum.Confirmed) {\n      return 'fa fa-check-circle text-success';\n    } else if (<PaymentStatus>status === <PaymentStatus>this.PaymentStatusEnum.Failed) {\n      return 'fa fa-ban text-danger';\n    } else if (<PaymentStatus>status === <PaymentStatus>this.PaymentStatusEnum.Waiting) {\n      return 'fa fa-clock-o text-primary';\n    }\n    else { return 'fa fa-info text-info' }\n  }\n\n  getAllInvoices() {\n    this.queryStringBuilder.setQueryParams(this.query);\n    this.isLoadingData = true;\n    this.invoicesService.getPagedInvoices(this.query).subscribe((res: PaginationResult<PaymentInvoice[]>) => {\n      this.invoices = res.items;\n      this.query = res.pagination;\n    },\n      error => { this.alertify.error(this.appTranslation.getWithValue('Common.Data.errorGettingData', this.entityCaption)); this.isLoadingData = false; },\n      () => { this.isLoadingData = false; }\n    );\n  }\n  onFilterChange() {\n    this.query.pageNumber = 1;\n    this.query.refreshCounter = true;\n    this.getAllInvoices();\n  }\n\n  resetFilter() {\n    this.query = <Pagination>{\n      pageNumber: 1,\n      refreshCounter: true,\n      pageSize: this.PAGE_SIZE,\n      filterText: ''\n    };\n    this.getAllInvoices();\n  }\n\n  refreshData() {\n    this.resetFilter();\n    this.alertify.info('  ');\n  }\n\n  sortBy(columnName: string) {\n    if (this.query.sortBy === columnName) {\n      this.query.isSortAscending = !this.query.isSortAscending;\n    } else {\n      this.query.sortBy = columnName;\n      this.query.isSortAscending = true;\n    }\n    this.getAllInvoices();\n  }\n\n  onPageChange(event: any) {\n    this.query.pageNumber = event;\n    this.getAllInvoices();\n  }\n\n\n  checkPaymentGatewayForThisCharge(chargeStatus: ChargeStatus, chargeId: string,) {\n\n  }\n\n}\n","<div class=\"jumbotron text-center\">\n  <h1 class=\"display-5 text-danger\">    !</h1>\n  <div class=\"lead\">\n                .\n  </div>\n  <div class=\"container\">\n    <img src=\"assets/img/payment-security-bank-svgrepo-com.svg\" class=\"img-fluid mx-auto d-block\" style=\"max-width: 400px;\" alt=\"\">\n  </div>\n  <div *ngIf=\"errorMessage\" class=\"alert alert-danger small\" >{{errorMessage}}</div>\n  <span class=\"lead text-info\">\n    <strong class=\"h6 text-dark\">.                          </strong>\n    <div class=\"align-self-center my-3\">\n      <a class=\"btn btn-warning w-50 btn-sm \" [routerLink]=\"['/contact-us']\" >  </a>\n    </div>\n    <div class=\"align-self-center my-3\">\n       <a class=\"btn btn-success w-50 btn-sm \" href=\"https://wa.me/message/Z5QMRKHHIEKYL1\" target=\"_blank\"><i class=\"fa fa-whatsapp px-1\" aria-hidden=\"true\"></i> {{'SocialMedias.WhatsApp' | translate }}</a>\n    </div>\n  </span>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-payment-failed',\n  templateUrl: './payment-failed.component.html',\n  styleUrls: []\n})\nexport class PaymentFailedComponent implements OnInit {\n  @Input() errorMessage: string = null;\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n  <div class=\"container\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n              <h2><i class=\"fa fa-credit-card-alt\" aria-hidden=\"true\"></i>&nbsp;{{'Invoices.Status' | translate }}</h2>\n          </div>\n          <ol>\n              \n              <li><span class=\"text-muted\" >{{'Invoices.Status' | translate }}</span></li>\n          </ol>\n      </div>\n  </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n  <div class=\"container-fluid\" [ngClass]=\"{'disabled-spinner-container': isLoadingData || isSubmitting}\">\n    <app-spinner-container [textClass]=\"'h4'\" [waitingText]=\"'Payments.Waiting' | translate \"  *ngIf=\"isLoadingData\" ></app-spinner-container>\n    <app-payment-success *ngIf=\"this.isPaidSucceeded === true\"></app-payment-success>\n    <app-payment-failed *ngIf=\"this.isPaidSucceeded === false\" [errorMessage]=\"message\"></app-payment-failed>\n  </div>\n</article>\n\n\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { AppTitleService } from 'src/app/_helpers/app-title.service';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { PermissionsService } from 'src/app/_helpers/permissions.service';\nimport { UrlService } from 'src/app/_helpers/url.service';\nimport { PaymentStatus, SubscriptionPackageInvoice } from 'src/app/_models/invoices/Invoice';\nimport { ChargeReturn } from 'src/app/_models/payments/tab-company';\nimport { PaymentsService } from 'src/app/_services/invoices/payments.service';\nimport { AuthService } from 'src/app/_services/users/auth.service';\n\n@Component({\n  selector: 'app-payment-result',\n  templateUrl: './payment-result.component.html',\n  styleUrls: []\n})\nexport class PaymentResultComponent implements OnInit {\n  isLoadingData = true;\n  isSubmitting = false;\n  previousUrl: any;\n  paramTapId: string = '';\n  currentUserId: number = 0;\n  isPaidSucceeded = null;\n  message = null;\n\n  constructor(private paymentsService: PaymentsService, public authService: AuthService, private route: ActivatedRoute,\n    private urlService: UrlService, private activatedRoute: ActivatedRoute, private router: Router, private alertify: AlertifyService,\n    private appTranslation: AppTranslationService, private appTitle: AppTitleService, private permissions: PermissionsService) {\n    this.route.queryParams.subscribe(params => {\n      this.paramTapId = params['tap_id'];\n    });\n  }\n\n\n  ngOnInit(): void {\n    this.activatedRoute.paramMap.subscribe(paramMap => {\n      if (this.paramTapId) {\n        console.log(this.paramTapId);\n        this.paymentsService.confirmAfterRedirectFromPaymentGateway(this.authService.currentUser.id, this.paramTapId).subscribe(\n          (result: any) => {\n\n            console.log('the Object  :', result);\n\n            if (this.isSubscriptionPackageInvoice(result)) {\n              const subscriptionPackageInvoice = result as SubscriptionPackageInvoice\n              if (subscriptionPackageInvoice.status === PaymentStatus.Confirmed)\n                this.isPaidSucceeded = true;\n              else {\n                this.isPaidSucceeded = false;\n                this.message = `${subscriptionPackageInvoice.chargeResponsiveCode} - ${subscriptionPackageInvoice.chargeResponsiveMessage}`;\n              }\n            }\n            if (this.isChargeReturn(result)) {\n              const chargeReturn = result as ChargeReturn\n              if (chargeReturn.status === 'CAPTURED')\n                this.isPaidSucceeded = true;\n              else {\n                this.isPaidSucceeded = false;\n                this.message = `${chargeReturn.response.code} - ${chargeReturn.response.message}`;\n              }\n            }\n\n\n          },\n          error => {\n            this.alertify.error(error);\n            this.isLoadingData = false;\n          },\n          () => { this.isLoadingData = false; }\n        );\n      }\n\n\n    });\n  }\n\n\n  isSubscriptionPackageInvoice(obj: any): obj is SubscriptionPackageInvoice {\n    return typeof obj.subscriptionPackageId === 'number';\n  }\n\n  isChargeReturn(obj: any): obj is ChargeReturn {\n    return typeof obj.status === 'string';\n  }\n\n\n  startNow() {\n    if (this.authService.loggedIn()) {\n      if (this.permissions.canApplyToTheJobs)\n        this.router.navigate(['/jobs']);\n      else if (this.permissions.canManageOrders)\n        this.router.navigate(['/profile']);\n      else if (this.permissions.canManageJobs)\n        this.router.navigate(['/jobs/new']);\n      else if (this.permissions.canOrderService)\n        this.router.navigate(['/taskers/list']);\n      else\n        this.router.navigate(['/']);\n    } else {\n      this.router.navigate(['/register']);\n    }\n  }\n\n}\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { AppTitleService } from 'src/app/_helpers/app-title.service';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { PermissionsService } from 'src/app/_helpers/permissions.service';\nimport { UrlService } from 'src/app/_helpers/url.service';\nimport { PaymentsResult, SubscriptionPackageInvoice } from 'src/app/_models/invoices/Invoice';\nimport { ChargeReturn } from 'src/app/_models/payments/tab-company';\nimport { PaymentsService } from 'src/app/_services/invoices/payments.service';\nimport { AuthService } from 'src/app/_services/users/auth.service';\n\n@Component({\n  selector: 'app-payment-success',\n  templateUrl: './payment-success.component.html',\n  styleUrls: []\n})\nexport class PaymentSuccessComponent implements OnInit {\n  isLoadingData = true;\n  isSubmitting = false;\n  previousUrl: any;\n  paramTapId: string = '';\n  currentUserId: number = 0;\n\n  constructor(private paymentsService: PaymentsService, public authService: AuthService, private route: ActivatedRoute,\n    private urlService: UrlService, private activatedRoute: ActivatedRoute, private router: Router, private alertify: AlertifyService,\n    private appTranslation: AppTranslationService, private appTitle: AppTitleService, private permissions: PermissionsService) {\n    this.route.queryParams.subscribe(params => {\n      this.paramTapId = params['tap_id'];\n    });\n  }\n\n\n  ngOnInit(): void {\n    this.activatedRoute.paramMap.subscribe(paramMap => {\n      if (this.paramTapId) {\n        console.log(this.paramTapId);\n        this.paymentsService.confirmAfterRedirectFromPaymentGateway(this.authService.currentUser.id, this.paramTapId).subscribe(\n          (result: any) => {\n\n            console.log('the Object  :', result);\n\n            if (this.isSubscriptionPackageInvoice(result)) {\n              console.log('invoice :', result);\n            }\n            if (this.isChargeReturn(result)) {\n              console.log('Charge :', result);\n            }\n\n\n          },\n          error => {\n            this.alertify.error(error);\n            this.isLoadingData = false;\n          },\n          () => { this.isLoadingData = false; }\n        );\n      }\n\n\n    });\n  }\n\n\n  isSubscriptionPackageInvoice(obj: any): obj is SubscriptionPackageInvoice {\n    return typeof obj.subscriptionPackageId === 'number';\n  }\n\n  isChargeReturn(obj: any): obj is ChargeReturn {\n    return typeof obj.status === 'string';\n  }\n\n\n  startNow() {\n    if (this.authService.loggedIn()) {\n      if (this.permissions.canApplyToTheJobs)\n        this.router.navigate(['/jobs']);\n      else if (this.permissions.canManageOrders)\n        this.router.navigate(['/profile']);\n      else if (this.permissions.canManageJobs)\n        this.router.navigate(['/jobs/new']);\n      else if (this.permissions.canOrderService)\n        this.router.navigate(['/taskers/list']);\n      else\n        this.router.navigate(['/']);\n    } else {\n      this.router.navigate(['/register']);\n    }\n  }\n\n}\n\n\n","<div class=\"jumbotron text-center\">\n  <h1 class=\"display-4\"> !</h1>\n  <p class=\"lead\">\n    <strong class=\"lead text-info\"><i class=\"fa fa-check-circle-o text-info\" aria-hidden=\"true\"></i>    </strong>              [ ].</p>\n    <div class=\"container text-dark\"><img src=\"assets/img/undraw-order-confirmed.svg\" class=\"img-fluid mx-auto d-block\" style=\"max-width: 400px;\" alt=\"\"></div>\n    <p class=\"lead pt-3\">\n      <a class=\"btn btn-info w-50 btn-sm \" href=\"javascript:void(0)\" (click)=\"startNow()\" role=\"button\">{{'Hero.Start' | translate }}</a>\n    </p>\n\n    <hr>\n    <p>\n         <a [routerLink]=\"['/contact-us']\" > </a>\n    </p>\n\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n// Components\nimport { TestPaymentGateComponent } from './test-payment-gate/test-payment-gate.component';\nimport { CheckoutComponent } from './checkout/checkout.component';\nimport { InvoiceListComponent } from './invoices/invoice-list/invoice-list.component';\nimport { InvoiceDetailsComponent } from './invoices/invoice-details/invoice-details.component';\nimport { PaymentResultComponent } from './payment-result/payment-result.component';\nimport { FreeSubscriptionResultComponent } from './free-subscription-result/free-subscription-result.component';\n\n\nconst routes: Routes = [\n  { path: 'test', component: TestPaymentGateComponent },\n  { path: 'invoices/list', component: InvoiceListComponent },\n  { path: 'invoices/:invoiceId/details', component: InvoiceDetailsComponent },\n  { path: 'checkout/free-subscription/:invoiceId', component: FreeSubscriptionResultComponent },\n  { path: 'checkout/gateway-result', component: PaymentResultComponent },\n  { path: 'checkout/:packageId', component: CheckoutComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PaymentsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PaymentsRoutingModule } from './payments-routing.module';\n\n// Components\nimport { TestPaymentGateComponent } from './test-payment-gate/test-payment-gate.component';\nimport { CheckoutComponent } from './checkout/checkout.component';\nimport { InvoiceListComponent } from './invoices/invoice-list/invoice-list.component';\nimport { InvoiceDetailsComponent } from './invoices/invoice-details/invoice-details.component';\nimport { PaymentSuccessComponent } from './payment-success/payment-success.component';\nimport { PaymentResultComponent } from './payment-result/payment-result.component';\nimport { PaymentFailedComponent } from './payment-failed/payment-failed.component';\nimport { FreeSubscriptionResultComponent } from './free-subscription-result/free-subscription-result.component';\n\n@NgModule({\n  declarations: [\n    TestPaymentGateComponent,\n    CheckoutComponent,\n    InvoiceListComponent,\n    InvoiceDetailsComponent,\n    PaymentSuccessComponent,\n    PaymentResultComponent,\n    PaymentFailedComponent,\n    FreeSubscriptionResultComponent,\n  ],\n  imports: [\n    SharedModule,\n    PaymentsRoutingModule\n  ]\n})\nexport class PaymentsModule { }\n","\n<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n  <div class=\"container\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n              <h2><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i>&nbsp;{{'Payments.TestPayment' | translate }}</h2>\n          </div>\n          <ol>\n              \n              <li><a [routerLink]=\"['/settings']\">{{'Menu.Dashboard' | translate }}</a></li>\n          </ol>\n      </div>\n  </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n  <div class=\"container-fluid\">\n        <!-- ======= Nav Buttons Section ======= -->\n      <div class=\"container px-0\">\n          <div class=\"row\">\n\n            <div class=\"container-fluid px-1 px-md-2 px-lg-4 py-5 mx-auto\" [ngClass]=\"{'disabled-spinner-container': isLoadingData || isSubmitting}\">\n              <app-spinner-container *ngIf=\"isLoadingData\" class=\"spinner-container\"></app-spinner-container>\n              <div class=\"row d-flex justify-content-center\">\n                  <div class=\"col-xl-7 col-lg-8 col-md-9 col-sm-11\">\n                      <div class=\"card border-0\">\n                        <div class=\"card-body px-2 py-4\">\n                          <form #checkout=\"ngForm\" (ngSubmit)=\"onSubmit()\" class=\"container\">\n                            <div class=\"row justify-content-center\">\n                                <h3 class=\"mb-4 text-info text-center\">{{'Payments.TestPayment' | translate }}</h3>\n                            </div>\n                            <div class=\"row\">\n\n                              <div class=\"col-sm-4 text-center justify-content-center align-content-center\">\n\n                                <!-- <small class=\"text-sm text-muted\"></small>\n                                <h5 class=\"mb-2\">{{subscriptionPackage.title}}</h5> -->\n                                <ng-container>\n                                  <small class=\"text-sm text-muted\"> </small>\n                                  <div class=\"col-12 px-3 justify-content-sm-center\">\n                                    <h2 class=\"\"><span class=\"text-info\">1</span><span class=\"text-md font-weight-bold mr-2\"></span></h2>\n                                  </div>\n                                </ng-container>\n\n                              </div>\n\n                              <div class=\"col-sm-8 split-border pr-4 mt-3\">\n                                <!-- Tap element will be here -->\n                                <div id=\"card-info\" #cardInfo ></div>\n                                <div id=\"success\" style=\"display: none;position: relative;float: left;\">Success! Your token is <span id=\"token\"></span></div>\n                                <div class=\"alert alert-danger mx-2\" id=\"card-errors\" role=\"alert\" *ngIf=\"error\">{{ error }}</div>\n                              </div>\n                            </div>\n                            <div class=\"row justify-content-center\">\n                              <!-- Tap pay button -->\n                              <button class=\"btn w-50 btn-info mt-4\" id=\"tap-btn\" [disabled]=\"isSubmitting || isLoadingData\">\n                                <i class='fa ' [ngClass]=\"isSubmitting ? 'fa-circle-o-notch fa-spin' : 'fa-credit-card'\"></i>&nbsp;\n                                {{(isSubmitting ? 'Common.Data.SendingData' : 'SubscriptionPackages.Subscription') | translate}}&nbsp;\n                              </button>\n                            </div>\n                          </form>\n                        </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n\n\n\n          </div>\n      </div>\n  </div>\n</article>\n\n\n\n","import { Component, AfterViewInit, OnDestroy, ViewChild, ElementRef, ChangeDetectorRef, OnInit } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from 'src/app/_services/users/auth.service';\nimport { UserService } from 'src/app/_services/users/User.service';\nimport { PaymentsService } from 'src/app/_services/invoices/payments.service';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { ChargeReturn } from 'src/app/_models/payments/tab-company';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\n\n@Component({\n  selector: 'app-test-payment-gate',\n  templateUrl: './test-payment-gate.component.html',\n  styleUrls: ['./test-payment-gate.component.css']\n})\nexport class TestPaymentGateComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('cardInfo') cardInfo: ElementRef;\n  card: any;\n  cardHandler = this.onChange.bind(this);\n  error: string;\n  successPaid: boolean = false;\n\n  // Page Declare\n  isLoadingData: boolean = true;\n  isSubmitting = false;\n\n\n  constructor(private cd: ChangeDetectorRef, private paymentsService: PaymentsService, private appTranslation: AppTranslationService,\n    public authService: AuthService, private location: Location, private route: ActivatedRoute, private alertify: AlertifyService,\n    private router: Router) { }\n\n  ngAfterViewInit() {\n\n    var style = {\n      base: {\n        color: '#535353',\n        lineHeight: '18px',\n        fontFamily: 'sans-serif',\n        fontSmoothing: 'antialiased',\n        fontSize: '16px',\n        '::placeholder': {\n          color: 'rgba(0, 0, 0, 0.26)',\n          fontSize: '15px'\n        }\n      },\n      invalid: {\n        color: 'red'\n      }\n    };\n\n    // input labels/placeholders\n    var labels = {\n      cardNumber: \"Card Number |  \",\n      expirationDate: \"MM/YY | /\",\n      cvv: \"CVV | \",\n      cardHolder: \"Card Holder Name |   \"\n    };\n\n    //payment options\n    var paymentOptions = {\n      currencyCode: [\"SAR\"],\n      labels: labels,\n      TextDirection: 'rtl'\n    }\n\n    //create element, pass style and payment options\n    this.card = elements.create('card', { style: style }, paymentOptions);\n    //mount element\n    this.card.mount('#card-info');\n    // this.card.mount(this.cardInfo.nativeElement);\n    this.card.addEventListener('change', this.cardHandler, true);\n  }\n\n  ngOnDestroy() {\n    try {\n      this.card.destroy();\n    } catch (error) {\n\n    }\n  }\n\n  ngOnInit(): void {\n\n  }\n\n  //card change event listener\n  onChange({ error }) {\n    this.isLoadingData = false;\n    if (error) {\n      if (error.key === 'error_invalid_cvv_characters')\n        this.error = \"   \"\n      else if (error.key === \"error_invalid_card_characters\")\n        this.error = \"   \"\n      else if (error.key === \"Your card's security code is incomplete.\")\n        this.error = \"    \"\n      else if (error.key === \"card_number_required\")\n        this.error = \"       \"\n      else if (error.key === \"error_invalid_card\")\n        this.error = \"      \"\n      else\n        this.error = error.message;\n    } else {\n      this.error = null;\n    }\n    this.cd.detectChanges();\n  }\n\n\n\n  async onSubmit() {\n    this.isSubmitting = true;\n    const result = await tap.createToken(this.card);\n    if (result.error) {\n      this.error = `   : \\n ${result.error.message}`;\n      this.isSubmitting = false;\n    } else {\n      console.log('success token: ', result.id);\n      this.paymentsService.chargeTest(this.authService.currentUser.id, result.id.toString()).subscribe(\n        (res: ChargeReturn) => {\n          console.log(res);\n          if (res.status === 'INITIATED')\n            window.location.href = res.transaction.url;\n          else if (res.status === 'CAPTURED')\n            this.router.navigate(['payments/checkout/success']);\n          else\n            this.alertify.error(`Error: ${res.response.code} <br>${res.response.message}`);\n          this.isSubmitting = false;\n          // this.isSubmitting = false;\n        },\n        error => {\n          this.alertify.error(error);\n          this.isSubmitting = false;\n          // this.router.navigate(['']);\n        },\n      )\n\n    }\n  }\n\n\n}\n"]}