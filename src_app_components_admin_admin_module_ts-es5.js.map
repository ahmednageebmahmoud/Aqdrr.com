{"version":3,"mappings":"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","names":["Role","name","description","permissions","AdminService","http","src_environments_environment__WEBPACK_IMPORTED_MODULE_0__","query","_utilities_service__WEBPACK_IMPORTED_MODULE_1__","baseUrl","roleId","userName","roles","post","get","photoId","userId","_angular_core__WEBPACK_IMPORTED_MODULE_2__","factory","providedIn","AdminPanelComponent","selectors","decls","vars","consts","template","routes","path","component","_admin_panel_admin_panel_component__WEBPACK_IMPORTED_MODULE_0__","data","title","AdminRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_2__","imports","exports","AdminModule","_shared_shared_module__WEBPACK_IMPORTED_MODULE_0__","_admin_routing_module__WEBPACK_IMPORTED_MODULE_1__","declarations","_admin_panel_admin_panel_component__WEBPACK_IMPORTED_MODULE_2__","_user_management_user_management_component__WEBPACK_IMPORTED_MODULE_3__","_roles_management_roles_management_component__WEBPACK_IMPORTED_MODULE_4__","_role_users_list_modal_role_users_list_modal_component__WEBPACK_IMPORTED_MODULE_5__","_permissions_modal_permissions_modal_component__WEBPACK_IMPORTED_MODULE_6__","_roles_modal_roles_modal_component__WEBPACK_IMPORTED_MODULE_7__","PermissionsModalComponent","activeModal","src_app_models_Users_role__WEBPACK_IMPORTED_MODULE_0__","Object","assign","tempRole","role","groupName","forEach","p","checked","filter","el","updateSelectedRole","emit","dismiss","outputs","ctx","_angular_core__WEBPACK_IMPORTED_MODULE_3__","ctx_r5","ctx_r7","ctx_r2","RoleUsersListModalComponent","appTranslation","adminService","alertify","pageSize","PAGE_SIZE","align","key","isSortable","style","getUsersInRole","entityName","selectedRole","id","subscribe","res","users","items","pagination","error","getWithValue","pageNumber","filterText","columnName","sortBy","isSortAscending","event","user","removeUserFromRole","success","usersCount","splice","findIndex","u","inputs","showAsModal","showModalButton","_angular_core__WEBPACK_IMPORTED_MODULE_5__","RolesManagementComponent","accountService","modalService","getRolesWithPermissions","getRolesAndPermissions","results","allPermissions","newRoles","isNewRole","permissionList","push","aPer","value","showModalWithRoles","currentRolePermissions","currentRolePermissionValues","map","indexOf","config","backdrop","size","keyboard","roleEdit","bsModalRef","open","_permissions_modal_permissions_modal_component__WEBPACK_IMPORTED_MODULE_1__","componentInstance","newRole","saveSuccessHelper","saveFailedHelper","updateRole","bsRoleUsersListModal","_role_users_list_modal_role_users_list_modal_component__WEBPACK_IMPORTED_MODULE_2__","_angular_core__WEBPACK_IMPORTED_MODULE_0__","role_r2","RolesModalComponent","console","log","updateSelectedRoles","close","UserManagementComponent","getUsersWithRoles","currentUserRoles","Array","from","userRoles","r","getRoles","availableRoles","aRole","_roles_modal_roles_modal_component__WEBPACK_IMPORTED_MODULE_0__","roleToUpdate","updatedRoles","roleNames","updateUserRoles"],"sources":["webpack:///src/app/_models/Users/role.ts","webpack:///src/app/_services/users/admin.service.ts","webpack:///src/app/components/admin/admin-panel/admin-panel.component.ts","webpack:///src/app/components/admin/admin-panel/admin-panel.component.html","webpack:///src/app/components/admin/admin-routing.module.ts","webpack:///src/app/components/admin/admin.module.ts","webpack:///src/app/components/admin/permissions-modal/permissions-modal.component.html","webpack:///src/app/components/admin/permissions-modal/permissions-modal.component.ts","webpack:///src/app/components/admin/role-users-list-modal/role-users-list-modal.component.html","webpack:///src/app/components/admin/role-users-list-modal/role-users-list-modal.component.ts","webpack:///src/app/components/admin/roles-management/roles-management.component.html","webpack:///src/app/components/admin/roles-management/roles-management.component.ts","webpack:///src/app/components/admin/roles-modal/roles-modal.component.html","webpack:///src/app/components/admin/roles-modal/roles-modal.component.ts","webpack:///src/app/components/admin/user-management/user-management.component.html","webpack:///src/app/components/admin/user-management/user-management.component.ts"],"sourcesContent":["import { Permission } from './permission.model';\n\nexport class Role {\n\n  constructor(name?: string, description?: string, permissions?: Permission[]) {\n    this.name = name;\n    this.description = description;\n    this.permissions = permissions;\n  }\n\n  public id: Number;\n  public name: string;\n  public description: string;\n  public usersCount: number;\n  public permissions: Permission[];\n}\n","import { PaginationResult } from '../../_models/data/Pagination';\nimport { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { User, UserWithRoles, BaseUserInfo } from '../../_models/Users/User';\nimport { Observable } from 'rxjs';\nimport { Utilities } from '../utilities.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdminService {\n  baseUrl = environment.ApiUrl + 'admin/';\n  constructor(private http: HttpClient) { }\n\n\n  getUsersWithRoles(query): Observable<PaginationResult<UserWithRoles[]>> {\n    return Utilities.getPaginationResult<UserWithRoles>(this.http, this.baseUrl + 'usersWithRoles', query);\n  }\n\n  getUsersInRole(roleId: Number, query): Observable<PaginationResult<BaseUserInfo[]>> {\n    return Utilities.getPaginationResult<BaseUserInfo>(this.http, `${this.baseUrl}Role/${roleId}/Users`, query);\n  }\n\n  updateUserRoles(userName: string, roles: {}) {\n    return this.http.post(`${this.baseUrl}editRoles/${userName}`, roles);\n  }\n\n  getPhotosForApproval() {\n    return this.http.get(this.baseUrl + 'photosForModeration');\n  }\n\n  approvePhoto(photoId) {\n    return this.http.post(this.baseUrl + 'approvePhoto/' + photoId, {});\n  }\n\n  rejectPhoto(photoId) {\n    return this.http.post(this.baseUrl + 'rejectPhoto/' + photoId, {});\n  }\n\n  removeUserFromRole(roleId: Number, userId: Number) {\n    return this.http.delete(`${this.baseUrl}Roles/${roleId}/Users/${userId}`);\n  }\n\n}\n\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-admin-panel',\n  templateUrl: './admin-panel.component.html',\n  styleUrls: []\n})\nexport class AdminPanelComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<!-- ======= Breadcrumbs ======= -->\n<section id=\"breadcrumbs\" class=\"breadcrumbs\">\n    <div class=\"container\">\n        <div class=\"d-flex justify-content-between align-items-center\">\n            <div>\n                <!-- <h2><span class=\"mr-1 job-title-badge badge badge-info\">{{'Portfolios.Work'| translate}}</span>{{portfolio?.title}}</h2>\n                <span class=\"sub-title\"><i class=\"fa fa-clock-o\"></i>&nbsp;{{portfolio?.createdDate | timeAgo}}</span> -->\n            </div>\n            <ol>\n                \n                <li><a [routerLink]=\"['/profile']\">{{'Portfolios.portfolio' | translate }}</a></li>\n            </ol>\n        </div>\n    </div>\n</section><!-- End Breadcrumbs -->\n\n<article id=\"profile\" class=\"content\">\n    <div class=\"container-fluid\">\n        <div class=\"col-md-12\">\n          <ul class=\"nav nav-tabs\" id=\"user-tab\" role=\"tablist\">\n            <li class=\"nav-item\">\n              <a class=\"nav-link active\" id=\"user-management-tab\" data-toggle=\"tab\" href=\"#user-management\" role=\"tab\" aria-controls=\"user-management\" aria-selected=\"true\">إدارة المستخدمين</a>\n            </li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" id=\"roles-management-tab\" data-toggle=\"tab\" href=\"#roles-management\" role=\"tab\" aria-controls=\"roles-management\" aria-selected=\"false\">إدارة الصلاحيات</a>\n            </li>\n          </ul>\n          <div class=\"tab-content  p-2\" id=\"myTabContent\">\n            <div class=\"tab-pane fade show active\" id=\"user-management\" role=\"tabpanel\" aria-labelledby=\"user-management-tab\">\n              <app-user-management></app-user-management>\n            </div>\n      \n            <div class=\"tab-pane fade\" id=\"roles-management\" role=\"tabpanel\" aria-labelledby=\"roles-management-tab\">\n              <app-roles-management></app-roles-management>\n            </div>\n          </div>\n        </div>\n    </div>\n</article>\n\n\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n//components\nimport { AdminPanelComponent } from './admin-panel/admin-panel.component';\n\nconst routes: Routes = [\n  { path: '', component: AdminPanelComponent, data: { title: 'sideMenu.Admin' } },\n\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AdminRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { AdminRoutingModule } from './admin-routing.module';\n\n// Components\nimport { AdminPanelComponent } from './admin-panel/admin-panel.component';\nimport { UserManagementComponent } from './user-management/user-management.component';\nimport { RolesManagementComponent } from './roles-management/roles-management.component';\nimport { RoleUsersListModalComponent } from './role-users-list-modal/role-users-list-modal.component';\nimport { PermissionsModalComponent } from './permissions-modal/permissions-modal.component';\nimport { RolesModalComponent } from './roles-modal/roles-modal.component';\n\n\n\n@NgModule({\n  declarations: [\n    AdminPanelComponent,\n    UserManagementComponent,\n    RolesManagementComponent,\n    RoleUsersListModalComponent,\n    PermissionsModalComponent,\n    RolesModalComponent,\n  ],\n  imports: [\n    SharedModule,\n    AdminRoutingModule,\n  ]\n})\nexport class AdminModule { }\n","<div class=\"modal-header\">\n  <h4 class=\"modal-title\"><i class=\"fa fa-shield\" aria-hidden=\"true\"></i> تعديل أذونات الصلاحية {{role.name}}</h4>\n</div>\n<div class=\"modal-body\">\n  <form #rolesForm=\"ngForm\" id=\"rolesForm\">\n      <div class=\"row\">\n          <div class=\"col-sm-5\">\n            <div class=\"form-group row has-feedback-icon\">\n              <label class=\"col-form-label col-md-3\" for=\"roleName\">{{'roles.editor.Name' | translate}}</label>\n              <div class=\"col-md-9\">\n                <input type=\"text\" id=\"roleName\" name=\"roleName\" placeholder=\"Enter role name\" class=\"form-control\" [(ngModel)]=\"tempRole.name\"  required minlength=\"2\" maxlength=\"200\" />\n              </div>\n            </div>\n          </div>\n    \n          <div class=\"col-sm-7\">\n            <div class=\"form-group row\">\n              <label class=\"col-form-label col-md-3\" for=\"roleDescription\">{{'roles.editor.Description' | translate}}</label>\n              <div class=\"col-md-9\">\n                <input type=\"text\" id=\"roleDescription\" name=\"roleDescription\" placeholder=\"Enter role description\" class=\"form-control\" [(ngModel)]=\"tempRole.description\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-md-12\">\n              <hr class=\"edit-separator-hr\" />\n            </div>\n          </div>\n\n    <div class=\"row\">\n        <div class=\"col-sm-12 card card-body bg-light well-sm permissionsRow\">\n          <div class=\"row\">\n  \n            <ng-template ngFor let-permissionGroup [ngForOf]=\"permissions | groupBy: 'groupName'\" let-i=\"index\">\n              <div class=\"form-group row col-sm-6 permissionsColumn\">\n                <label class=\"col-md-5 col-form-label group-name\" for=\"checkboxes\" (click)=\"toggleGroup(permissionGroup.key)\">{{permissionGroup.key}}</label>\n                <div class=\"col-md-7\">\n                  <div class=\"animated-checkbox\" *ngFor=\"let permission of permissionGroup.value\">\n                    <input name=\"checkboxes-{{permission.value}}\" id=\"checkboxes-{{permission.value}}\" type=\"checkbox\" value=\"permission.value\"\n                           class=\"\" [checked]=\"permission.checked\" (change)=\"permission.checked = !permission.checked\">\n                    <label class=\"label-text\"  title=\"{{permission.description}}\" for=\"checkboxes-{{permission.value}}\">{{permission.name}}</label>\n                  </div>\n                </div>\n              </div>\n              <div *ngIf=\"(i + 1) % 2 === 0\" class=\"clearfix\"></div>\n            </ng-template>\n  \n          </div>\n        </div>\n  \n      </div>\n\n\n  </form>\n</div>\n<div class=\"modal-footer\">\n    <div class=\"col-sm-5\">\n          <a (click)=\"selectAll()\" href=\"javascript:;\" class=\"btn btn-link\">{{'roles.editor.SelectAll' | translate}}</a>|<a (click)=\"selectNone()\" href=\"javascript:;\" class=\"btn btn-link\">{{'roles.editor.SelectNone' | translate}}</a>\n    </div>\n    <div class=\"col-sm-7\">\n        <div ngPreserveWhitespaces class=\"\">\n            <button type=\"button\" class=\"btn btn-default\" form=\"rolesForm\" (click)=\"updateTheRole();\">اعتماد</button>\n            <button type=\"button\" class=\"btn btn-default\" (click)=\"activeModal.dismiss()\">إغلاق</button>\n        </div>\n      </div>\n\n</div>","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Role } from 'src/app/_models/Users/role';\n\n@Component({\n  selector: 'app-permissions-modal',\n  templateUrl: './permissions-modal.component.html',\n  styleUrls: ['./permissions-modal.component.css']\n})\nexport class PermissionsModalComponent implements OnInit {\n  @Output() updateSelectedRole = new EventEmitter();\n  role: Role;\n  permissions: any[];\n  tempRole = new Role();\n  constructor(public activeModal: NgbActiveModal) { }\n\n  ngOnInit() {\n    Object.assign(this.tempRole, this.role);\n  }\n\n  toggleGroup(groupName: string) {\n    this.permissions.forEach(p => {\n      if (p.groupName !== groupName) {\n        return;\n      }\n    });\n  }\n\n\n  selectAll() {\n    this.permissions.forEach(p => p.checked = true);\n  }\n\n\n  selectNone() {\n    this.permissions.forEach(p => p.checked = false);\n  }\n\n  updateTheRole() {\n    this.tempRole.permissions = [...this.permissions.filter(el => el.checked === true)];\n    this.updateSelectedRole.emit(this.tempRole);\n    this.activeModal.dismiss();\n  }\n}\n","<!-- start Normal Bootstrap Modal Dialog -->\n<!-- عرض قائمة المستخدمين كـ Modal -->\n<ng-container *ngIf=\"showAsModal\">\n  <button id=\"btnToolbarAddNew\" *ngIf=\"showModalButton\" class=\"btn btn-outline-info\" type=\"button\" data-dismiss=\"modal\"\n    data-toggle=\"modal\" data-target=\"#RoleUsersListModal\">\n    <span class=\"fa fa-bar-chart\" title=\"{{selectedRole.description}}\"></span>\n  </button>\n  <div bsModal class=\"modal-content\">\n    <div class=\"modal-header\">\n      <h5 class=\"modal-title\"><span class=\"fa fa-bar-chart\"></span>&nbsp;{{selectedRole.description}}</h5>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"activeModal.close()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body\">\n      <ng-template [ngTemplateOutlet]=\"ListOfUsersInSelectedRole\"></ng-template>\n    </div>\n    <div class=\"modal-footer  text-right\">\n      <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.close()\"\n        data-dismiss=\"modal\">{{'Common.Form.Close' | translate }}</button>\n    </div>\n  </div>\n  <!-- End Normal Bootstrap Modal Dialog -->\n</ng-container>\n\n\n\n<!-- قالب قائمة الأسماء -->\n<ng-template #ListOfUsersInSelectedRole>\n  <p *ngIf=\"!users\"><em><i class=\"fa fa-spinner\"></i> {{'Common.Data.Loading' | translate}}</em></p>\n  <div class=\"btn-toolbar justify-content-between m-2\" role=\"toolbar\" aria-label=\"Toolbar with filter field\">\n    <div class=\"form-inline\">\n      <div class=\"input-group\">\n        <input type=\"text\" class=\"form-control\" maxlength=\"30\" [(ngModel)]=\"query.filterText\"\n          (keyup.esc)=\"resetFilter()\" (keyup.enter)=\"onFilterChange()\"\n          placeholder=\"{{'Common.Data.SearchTip' | translate}}\">\n        <div class=\"input-group-append\" id=\"button-addon4\">\n          <button id=\"LnkBtn_resetFilter\" class=\"btn btn-danger\" type=\"button\" (click)=\"resetFilter()\"\n            title=\"{{'Common.Data.Reset' | translate}}\"><span class=\"fa fa-remove\"></span></button>\n          <button id=\"btnToolbarRefreshData\" class=\"btn btn-success\" type=\"button\" (click)=\"resetFilter()\"\n            title=\"{{'Common.Data.Refresh' | translate}}\"><span class=\"fa fa-refresh\"></span></button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"table-responsive\">\n    <table class=\"table table-sm table-bordered table-hover table-light\">\n      <thead class=\"table-info\">\n        <tr>\n          <th *ngFor=\"let c of columns\" class=\"{{c.style}}\">\n            <div *ngIf=\"c.isSortable\" class=\"align-middle text-{{c.align}}\" (click)=\"sortBy(c.key)\">\n              {{ c.title }}\n              <i *ngIf=\"query.sortBy === c.key\"\n                 class=\"fa \"\n                 [class.fa-sort-asc]=\"query.isSortAscending\"\n                 [class.fa-sort-desc]=\"!query.isSortAscending\"></i>\n            </div>\n            <div *ngIf=\"!c.isSortable\" class=\"align-middle text-{{c.align}}\">\n              {{ c.title }}\n            </div>\n          </th>\n        </tr>\n      </thead>\n      <tfoot>\n        <tr class=\"table-info\">\n          <th colspan='100%' class=\"text-center\">{{'Common.Data.ResultsFound' | translate }} [ {{query.totalItems || '0' }} ] </th>\n        </tr>\n      </tfoot>\n      <tbody>\n        <tr *ngIf=\"!users?.length\">\n          <th colspan='100%' class=\"text-center text-info\" >{{'Common.Messages.NotFoundAnyRecord' | translate:{'value': 'users.management.User' | translate} }}</th>\n        </tr>\n        <tr *ngFor=\"let user of users\">\n          <th class=\"align-middle text-center d-none d-sm-table-cell\" scope=\"row\">{{user.id}}</th>\n          <td class=\"align-middle d-none d-sm-table-cell\">{{user.userName}}</td>\n          <td class=\"align-middle\">{{user.fullName}}</td>\n          <td><button class=\"btn btn-danger btn-sm\" (click)=\"removeUserFromRole(user);\">{{'Common.CRUD.Remove' | translate }}</button></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n    <ngb-pagination class=\"d-flex justify-content-center\" [boundaryLinks]=\"true\" [pageSize]=\"query.pageSize\" [collectionSize]=\"query.totalItems\" \n                [(page)]=\"query.pageNumber\"  [maxSize]=\"5\" [rotate]=\"true\" (pageChange)=\"onPageChange($event);\">\n        <ng-template ngbPaginationFirst>&laquo;</ng-template>\n        <ng-template ngbPaginationPrevious>&lsaquo;</ng-template>\n        <ng-template ngbPaginationLast>&raquo;</ng-template>\n        <ng-template ngbPaginationNext>&rsaquo;</ng-template>\n    </ngb-pagination>\n</ng-template>","import { Component, OnInit, Optional, Input } from '@angular/core';\nimport { BaseUserInfo } from 'src/app/_models/Users/User';\nimport { AdminService } from 'src/app/_services/users/admin.service';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { Role } from 'src/app/_models/Users/role';\nimport { PaginationResult } from 'src/app/_models/data/Pagination';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-role-users-list-modal',\n  templateUrl: './role-users-list-modal.component.html',\n  styleUrls: []\n})\nexport class RoleUsersListModalComponent implements OnInit {\n  @Input() showAsModal: boolean = false;\n  @Input() showModalButton: boolean = false;\n  \n  users: BaseUserInfo[];\n  selectedRole: Role;\n  entityName: string;\n  /* -------------------------------------------*/\n  private readonly PAGE_SIZE = 15;\n  queryResult: any = {};\n  query: any = { pageSize: this.PAGE_SIZE };\n  columns = [\n    { title: '#', align: 'center', key: 'id', isSortable: true, style: 'd-none d-sm-table-cell' },\n    { title: 'إسم المستخدم', align: 'center', key: 'userName', isSortable: true, style: 'd-none d-sm-table-cell' },\n    { title: 'الاسم', align: 'center', key: 'fullName', isSortable: true },\n    { title: '' },\n  ];\n\n  constructor(private appTranslation: AppTranslationService, \n    private adminService: AdminService, private alertify: AlertifyService, @Optional() public activeModal: NgbActiveModal) { }\n\n  ngOnInit() {\n    this.getUsersInRole();\n    this.entityName = this.appTranslation.get('users.management.Users');\n  }\n\n  getUsersInRole() {\n    this.adminService.getUsersInRole(this.selectedRole.id, this.query).subscribe((res: PaginationResult<BaseUserInfo[]>) => {\n      this.users = res.items;\n      this.query = res.pagination;\n    },\n      () => this.alertify.error(this.appTranslation.getWithValue('Common.Data.errorGettingData', this.entityName))\n    );\n  }\n\n  onFilterChange() {\n    this.query.pageNumber = 1;\n    this.getUsersInRole();\n  }\n\n  resetFilter() {\n    this.query = {\n      pageNumber: 1,\n      pageSize: this.PAGE_SIZE,\n      filterText: ''\n    };\n    this.getUsersInRole();\n  }\n\n  sortBy(columnName) {\n    if (this.query.sortBy === columnName) {\n      this.query.isSortAscending = !this.query.isSortAscending;\n    } else {\n      this.query.sortBy = columnName;\n      this.query.isSortAscending = true;\n    }\n    this.getUsersInRole();\n  }\n\n  onPageChange(event: any) {\n    this.query.pageNumber = event;\n    this.getUsersInRole();\n  }\n\n  removeUserFromRole(user: BaseUserInfo) {\n    this.adminService.removeUserFromRole(this.selectedRole.id, user.id).subscribe(() => {\n      this.alertify.success(this.appTranslation.get('roles.management.RemoveUserFromRole'));\n      this.selectedRole.usersCount -= 1;\n      this.users.splice(this.users.findIndex(u => u.id == user.id), 1);\n    },\n      () => this.alertify.error(this.appTranslation.get('Common.Messages.ErrorOnAction'))\n    );\n  }\n\n}\n","\n<div class=\"btn-toolbar justify-content-between m-2\" role=\"toolbar\" aria-label=\"Toolbar with button groups\">\n\n    <form class=\"form-inline\">\n        <div class=\"input-group\">\n                <input type=\"text\" class=\"form-control\" maxlength=\"30\" placeholder=\"Put your search here\">\n                <div class=\"input-group-append\" id=\"button-addon4\">\n                    <button id=\"LnkBtnQuickSearch\" class=\"btn btn-default\" type=\"button\"><span class=\"fa fa-search\"></span></button>\n                    <button id=\"LnkBtnCancelSearch\" class=\"btn btn-danger\" type=\"button\"><span class=\"fa fa-remove\"></span></button>\n                </div>\n            </div>\n     </form>\n      <div class=\"btn-group\" role=\"group\" aria-label=\"First group\">\n          <button id=\"btnTolbar_AddNewRole\" type=\"button\" class=\"btn btn-default\" (click)=\"addNewRole()\">\n              <span class=\"fa fa-plus text-primary\" title=\"Add\" ></span>\n          </button>\n\n          <button type=\"button\" class=\"btn btn-default\" (click)=\"getRolesWithPermissions()\">\n              <span class=\"fa fa-refresh text-success\" title=\"refresh\"></span>\n          </button>\n      </div>\n</div>\n\n<div class=\"table-responsive\">\n<table class=\"table table-sm table-bordered table-hover\">\n  <thead class=\"table-info\">\n    <tr>\n      <th class=\"align-middle text-center\" scope=\"col\" style=\"width: 10%\">#</th>\n      <th class=\"align-middle text-center\" style=\"width: 25%\">إسم الصلاحية</th>\n      <th class=\"align-middle text-center\" style=\"width: 10%\">المُستخدمون</th>\n      <th class=\"align-middle text-center\" style=\"width: 40%\">الأذونات</th>\n      <th class=\"align-middle text-center\" style=\"width: 15%\"></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let role of roles\">\n      <td class=\"align-middle text-center\" scope=\"row\">{{role.id}}</td>\n      <td class=\"align-middle\"><strong class=\"text-info\" (click)=\"showUsersListInSelectedRole(role)\">{{role.name}}</strong><br>{{role.description}}</td>\n      <td class=\"align-middle text-center\" scope=\"row\">{{role.usersCount}}</td>\n      <td><span class=\"badge-md bg-secondary\" *ngFor=\"let per of role.permissions\" title=\"{{per.description}}\">{{per.name}}</span></td>\n      <td><button class=\"btn btn-info btn-sm\" (click)=\"editPermissionsModal(role);\" >تعديل الأذونات</button></td>\n    </tr>\n  </tbody>\n</table>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Role } from 'src/app/_models/Users/role';\nimport { AccountService } from 'src/app/_services/users/account.service';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { Permission } from 'src/app/_models/Users/permission.model';\nimport { PermissionsModalComponent } from '../permissions-modal/permissions-modal.component';\nimport { RoleUsersListModalComponent } from '../role-users-list-modal/role-users-list-modal.component';\nimport { NgbModal, NgbModalOptions, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-roles-management',\n  templateUrl: './roles-management.component.html',\n  styleUrls: []\n})\nexport class RolesManagementComponent implements OnInit {\n  roles: Role[];\n  private roleEdit: Role = new Role();\n  allPermissions: Permission[];\n  bsModalRef: NgbModalRef | null;\n  bsRoleUsersListModal: NgbModalRef | null;\n  isNewRole = true;\n  constructor(private accountService: AccountService,\n    private alertify: AlertifyService, private modalService: NgbModal) { }\n\n  ngOnInit() {\n    this.getRolesWithPermissions();\n  }\n\n  getRolesWithPermissions() {\n    this.accountService.getRolesAndPermissions().subscribe(\n      results => {\n        this.roles = results[0];\n        this.allPermissions = results[1];\n        this.alertify.success('تم تحديث البيانات بنجاح');\n      },\n      error => {\n        this.alertify.error('حدثت مشكلة في جلب الصلاحيات');\n      }\n    );\n  }\n\n  addNewRole() {\n    const newRoles = new Role();\n    this.isNewRole = true;\n    const permissionList = [];\n    this.allPermissions.forEach(aPer => {\n      permissionList.push({\n        name: aPer.name, groupName: aPer.groupName,\n        description: aPer.description, value: aPer.value, checked: false\n      });\n    });\n    this.showModalWithRoles(newRoles, permissionList);\n  }\n\n  editPermissionsModal(role: Role) {\n    this.isNewRole = false;\n    const permissionList = [];\n    const currentRolePermissions = role.permissions as Permission[];\n    const currentRolePermissionValues = [...currentRolePermissions.map(el => el.value)];\n    this.allPermissions.forEach(aPer => {\n      if (currentRolePermissionValues.indexOf(aPer.value) >= 0) {\n        permissionList.push({\n          name: aPer.name, groupName: aPer.groupName,\n          description: aPer.description, value: aPer.value, checked: true\n        });\n      } else {\n        permissionList.push({\n          name: aPer.name, groupName: aPer.groupName,\n          description: aPer.description, value: aPer.value, checked: false\n        });\n      }\n    });\n    this.showModalWithRoles(role, permissionList);\n  }\n\n  showModalWithRoles(role: Role, permissions: Permission[]) {\n    const config: NgbModalOptions = {\n      backdrop: 'static',\n      size: 'lg',\n      keyboard: false,\n    };\n    this.roleEdit = role;\n    this.bsModalRef = this.modalService.open(PermissionsModalComponent, config);\n    this.bsModalRef.componentInstance.role = role;\n    this.bsModalRef.componentInstance.permissions = permissions;\n    this.bsModalRef.componentInstance.updateSelectedRole.subscribe((tempRole: Role) => {\n      if (this.isNewRole) {\n        this.accountService.newRole(tempRole).subscribe(role => this.saveSuccessHelper(role), error => this.saveFailedHelper(error));\n      } else {\n        this.accountService.updateRole(tempRole).subscribe(\n          response => this.saveSuccessHelper(tempRole),\n          error => this.saveFailedHelper(error));\n      }\n    });\n  }\n\n  private saveSuccessHelper(role?: Role) {\n    if (role) {\n      if (this.isNewRole) {\n        this.roles.push(role);\n        this.alertify.success(`Role ${this.roleEdit.name} was created successfully`);\n      } else {\n        Object.assign(this.roleEdit, role);\n        this.alertify.success(`Changes to role ${this.roleEdit.name} was saved successfully`);\n      }\n    } else {\n      this.alertify.error(`No selected role or new to save`);\n    }\n    this.roleEdit = new Role();\n  }\n\n  private saveFailedHelper(error: any) {\n    this.alertify.error(error);\n  }\n\n  showUsersListInSelectedRole(role: Role) {\n    const config: NgbModalOptions = {\n      backdrop: 'static',\n      size: 'lg',\n      keyboard: false,\n    };\n    this.bsRoleUsersListModal = this.modalService.open(RoleUsersListModalComponent, config);\n    this.bsRoleUsersListModal.componentInstance.showAsModal = true;\n    this.bsRoleUsersListModal.componentInstance.selectedRole = role;\n  }\n\n\n\n}\n","<div class=\"modal-header\">\n  <h4 class=\"modal-title\">تعديل الصلاحيات الممنوحه لـ {{user.userName}}</h4>\n</div>\n<div class=\"modal-body\">\n  <form #rolesForm=\"ngForm\" id=\"rolesForm\">\n    <div class=\"animated-checkbox\" *ngFor=\"let role of roles\">\n      <label>\n        <input type=\"checkbox\" value=\"role.value\"\n               [checked]=\"role.checked\"\n               (change)=\"role.checked = !role.checked\"\n               [disabled]=\"role.value === 'Admin' && user.userName ==='Admin'\">\n        <span class=\"label-text\">{{role.name}}</span>\n      </label>\n    </div>\n  </form>\n</div>\n<div class=\"modal-footer\">\n  <button type=\"button\" class=\"btn btn-default\" form=\"rolesForm\" (click)=\"updateRoles();\">اعتماد</button>\n  <button type=\"button\" class=\"btn btn-default\" (click)=\"activeModal.close()\">إغلاق</button>\n</div>\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { User } from 'src/app/_models/Users/User';\n\n\n@Component({\n  selector: 'app-roles-modal',\n  templateUrl: './roles-modal.component.html',\n  styleUrls: ['./roles-modal.component.css']\n})\nexport class RolesModalComponent implements OnInit {\n  @Output() updateSelectedRoles = new EventEmitter();\n  user: User;\n  roles: any[];\n  constructor(public activeModal: NgbActiveModal) { }\n\n  ngOnInit() {\n\n  }\n\n  updateRoles() {\n    console.log(this.roles);\n    this.updateSelectedRoles.emit(this.roles);\n    this.activeModal.close();\n  }\n}\n","<p *ngIf=\"!users\"><em><i class=\"fa fa-spinner\"></i> {{'Common.Data.Loading' | translate}}</em></p>\n<div class=\"btn-toolbar justify-content-between m-2\" role=\"toolbar\" aria-label=\"Toolbar with filter field\">\n  <div class=\"form-inline\">\n    <div class=\"input-group\">\n      <input type=\"text\" class=\"form-control\" maxlength=\"30\" [(ngModel)]=\"query.filterText\" (keyup.esc)=\"resetFilter()\" (keyup.enter)=\"onFilterChange()\" placeholder=\"{{'Common.Data.SearchTip' | translate}}\">\n      <div class=\"input-group-append\" id=\"button-addon4\">\n        <button id=\"LnkBtn_resetFilter\" class=\"btn btn-danger\" type=\"button\" (click)=\"resetFilter()\" title=\"{{'Common.Data.Reset' | translate}}\"><span class=\"fa fa-remove\"></span></button>\n      </div>\n    </div>\n  </div>\n  <div class=\"btn-group\" role=\"group\" aria-label=\"ToolBar\">\n    <button id=\"btnToolbarrefreshData\" type=\"button\" class=\"btn btn-success\" (click)=\"resetFilter()\">\n      <span class=\"fa fa-refresh text-success\" title=\"{{'Common.Data.Refresh' | translate}}\"></span>\n    </button>\n  </div>\n</div>\n\n<div class=\"table-responsive\">\n  <table class=\"table table-sm table-bordered table-hover\">\n    <thead class=\"table-info\">\n      <tr>\n        <th *ngFor=\"let c of columns\">\n          <div *ngIf=\"c.isSortable\" class=\"align-middle text-{{c.align}}\" (click)=\"sortBy(c.key)\">\n            {{ c.title }}\n            <i *ngIf=\"query.sortBy === c.key\"\n               class=\"fa \"\n               [class.fa-sort-asc]=\"query.isSortAscending\"\n               [class.fa-sort-desc]=\"!query.isSortAscending\"></i>\n          </div>\n          <div *ngIf=\"!c.isSortable\" class=\"align-middle text-{{c.align}}\">\n            {{ c.title }}\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tfoot>\n\t\t\t<tr class=\"table-info\">\n\t\t\t\t<th colspan='100%' class=\"text-center\" >عدد النتائج  [ {{query.totalItems || '0' }} ] </th>\n\t\t\t</tr>\n\t\t</tfoot>\n    <tbody>\n      <tr *ngFor=\"let user of users\">\n        <th class=\"align-middle text-center\" scope=\"row\">{{user.id}}</th>\n        <td class=\"align-middle\"><a class=\"text-dark font-weight-bold\" [routerLink]=\"['/profile/' , user.id]\">{{user.userName}}</a></td>\n        <td class=\"align-middle\"><a class=\"text-dark font-weight-bold\" [routerLink]=\"['/profile/' , user.id]\">{{user.arFullName}}</a></td>\n        <td><span class=\"badge-md bg-secondary\" *ngFor=\"let role of user.userRoles\" title=\"{{role.description}}\">{{role.name}}</span></td>\n        <td><button class=\"btn btn-info btn-sm\" (click)=\"editRolesModal(user);\">تعديل الصلاحيات</button></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<div class=\"d-flex justify-content-center\">\n    <ngb-pagination class=\"d-flex justify-content-center\" [boundaryLinks]=\"true\" [pageSize]=\"query.pageSize\" [collectionSize]=\"query.totalItems\" \n                [(page)]=\"query.pageNumber\"  [maxSize]=\"5\" [rotate]=\"true\" (pageChange)=\"onPageChange($event);\">\n        <ng-template ngbPaginationFirst>&laquo;</ng-template>\n        <ng-template ngbPaginationPrevious>&lsaquo;</ng-template>\n        <ng-template ngbPaginationLast>&raquo;</ng-template>\n        <ng-template ngbPaginationNext>&rsaquo;</ng-template>\n    </ngb-pagination>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { User, UserWithRoles } from 'src/app/_models/Users/User';\nimport { AdminService } from 'src/app/_services/users/admin.service';\nimport { AlertifyService } from 'src/app/_helpers/Alertify';\nimport { RolesModalComponent } from '../roles-modal/roles-modal.component';\nimport { AccountService } from 'src/app/_services/users/account.service';\nimport { Role } from 'src/app/_models/Users/role';\nimport { PaginationResult } from 'src/app/_models/data/Pagination';\nimport { AppTranslationService } from 'src/app/_helpers/app-translation';\nimport { NgbModal, NgbModalOptions, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-user-management',\n  templateUrl: './user-management.component.html',\n  styleUrls: []\n})\nexport class UserManagementComponent implements OnInit {\n  users: UserWithRoles[];\n  bsModalRef: NgbModalRef | null;\n  availableRoles: Role[];\n  entityName: string;\n  /* -------------------------------------------*/\n  private readonly PAGE_SIZE = 20;\n  queryResult: any = {};\n  query: any = { pageSize: this.PAGE_SIZE };\n  columns = [\n    { title: '#', align: 'center', key: 'id', isSortable: true },\n    { title: 'إسم المستخدم', align: 'center', key: 'userName', isSortable: true },\n    { title: 'الاسم', align: 'center', key: 'arFullName', isSortable: true },\n    { title: 'الصلاحيات', align: 'center' },\n    { title: '' },\n  ];\n\n  constructor(private appTranslation: AppTranslationService, private adminService: AdminService, private accountService: AccountService,\n    private alertify: AlertifyService, private modalService: NgbModal) { }\n\n  ngOnInit() {\n    this.getUsersWithRoles();\n    this.entityName = this.appTranslation.get('users.management.Users');\n  }\n\n  getUsersWithRoles() {\n    this.adminService.getUsersWithRoles(this.query).subscribe((res: PaginationResult<UserWithRoles[]>) => {\n      this.users = res.items;\n      this.query = res.pagination;\n    },\n      error => this.alertify.error(this.appTranslation.getWithValue('Common.Data.errorGettingData', this.entityName))\n    );\n  }\n\n  onFilterChange() {\n    this.query.pageNumber = 1;\n    this.getUsersWithRoles();\n  }\n\n  resetFilter() {\n    this.query = {\n      pageNumber: 1,\n      pageSize: this.PAGE_SIZE,\n      filterText: ''\n    };\n    this.getUsersWithRoles();\n  }\n\n  sortBy(columnName) {\n    if (this.query.sortBy === columnName) {\n      this.query.isSortAscending = !this.query.isSortAscending;\n    } else {\n      this.query.sortBy = columnName;\n      this.query.isSortAscending = true;\n    }\n    this.getUsersWithRoles();\n  }\n\n  onPageChange(event: any) {\n    this.query.pageNumber = event;\n    this.getUsersWithRoles();\n  }\n\n  editRolesModal(user: UserWithRoles) {\n    const roles = [];\n    const currentUserRoles = Array.from(user.userRoles).map(r => r.name) as any[];\n    this.accountService.getRoles().subscribe(\n      results => {\n        this.availableRoles = results;\n        this.availableRoles.forEach(aRole => {\n          if (currentUserRoles.indexOf(aRole.name) >= 0) {\n            roles.push({\n              name: (aRole.description === null || aRole.description === '') ? aRole.name : aRole.description,\n              value: aRole.name, checked: true\n            });\n          } else {\n            roles.push({\n              name: (aRole.description === null || aRole.description === '') ? aRole.name : aRole.description,\n              value: aRole.name, checked: false\n            });\n          }\n        });\n        this.showModalWithRoles(user, roles);\n      },\n      error => {\n        this.alertify.error(error);\n        return null;\n      }\n    );\n  }\n\n  showModalWithRoles(user: UserWithRoles, roles: any[]) {\n    const config: NgbModalOptions = {\n      backdrop: 'static',\n      size: 'lg',\n      keyboard: false,\n    };\n    this.bsModalRef = this.modalService.open(RolesModalComponent,  config );\n    this.bsModalRef.componentInstance.user = user;\n    this.bsModalRef.componentInstance.roles = roles;\n    this.bsModalRef.componentInstance.updateSelectedRoles.subscribe(selectedRole => {\n      const roleToUpdate = {\n        updatedRoles: [...selectedRole // (...) is the same for each\n          .filter(el => el.checked === true) // condation (el.checked === true)\n          .map(el => ({ 'name': el.value, 'description': el.name }))],\n          // return Value (el.value) Admin Or moderator ...etc\n          roleNames: [...selectedRole.filter(el => el.checked === true).map(el => el.value )]\n      };\n      if (roleToUpdate) {\n        this.adminService.updateUserRoles(user.userName, roleToUpdate).subscribe(\n          () => {user.userRoles = [...roleToUpdate.updatedRoles];},\n          error => this.alertify.error(error)\n        );\n      }\n    });\n  }\n\n}\n"]}