<!-- ======= Breadcrumbs ======= -->
<section id="breadcrumbs" class="breadcrumbs">
  <div class="container">
      <div class="d-flex justify-content-between align-items-center">
          <div>
              <h2>{{'JobsOffers.EdtJobsOfferTitle' | translate }}</h2>
          </div>
          <ol>
              
              <li><a [routerLink]="['/jobs/manage']">{{'JobsOffers.ManageJobs' | translate }}</a></li>
          </ol>
      </div>
  </div>
</section><!-- End Breadcrumbs -->

<article id="profile" class="content">
  <div class="container">
      <!-- start Normal Update BootStrap CardForm Form -->
      <form id ="formUpdateJobsOffer" [formGroup]="updateJobsOfferForm" (ngSubmit)="updateNewJobOffer()">
          <div class="card">
              <div class="card-header">
                  <h5><span class="fa fa-plus"></span>&nbsp;{{'JobsOffers.EdtJobsOfferTitle' | translate }}</h5>
              </div>
              <div class="card-body">
                  <div class="form-group">
                      <label for="ddlJobCategoryId" class="font-weight-bold" >{{'JobsOffers.JobCategoryId' | translate }}<strong class="text-danger">*</strong></label>
                      <select id="ddlJobCategoryId" name="ddlJobCategoryId" formControlName="jobCategoryId" class="form-control" [ngClass]="{'is-invalid' : updateValidator.jobCategoryId.errors && updateValidator.jobCategoryId.touched }">
                          <option [value]="null" >{{'Common.Form.ChooseFromMenu' | translate }}</option>
                          <option *ngFor="let jobCategory of jobsCategoriesOptions" value="{{jobCategory.id}}">{{jobCategory.name}}</option>
                      </select>
                      <div *ngIf="updateValidator.jobCategoryId.touched && updateValidator.jobCategoryId.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.jobCategoryId.errors.required">{{'Common.Validation.SelectedRequiredMsg' | translate }}</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="ddlCityId" class="font-weight-bold" >{{'JobsOffers.CityId' | translate }}<strong class="text-danger">*</strong></label>
                      <select id="ddlCityId" name="ddlCityId" formControlName="cityId" class="form-control" [ngClass]="{'is-invalid' : updateValidator.cityId.errors && updateValidator.cityId.touched }">
                          <option [value]="null">{{'Common.Form.ChooseFromMenu' | translate }}</option>
                          <option *ngFor="let city of citiesOptions" value="{{city.id}}">{{city.name}}</option>
                      </select>
                      <div *ngIf="updateValidator.cityId.touched && updateValidator.cityId.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.cityId.errors.required">{{'Common.Validation.SelectedRequiredMsg' | translate }}</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="txtUpdateJobName" class="font-weight-bold" >{{'JobsOffers.JobName' | translate }}<strong class="text-danger">*</strong></label>
                      <input id="txtUpdateJobName" name="txtUpdateJobName"  class= "form-control default"  maxlength="80" formControlName="jobName" placeholder="{{'JobsOffers.JobNameEmp' | translate }}" [ngClass]="{'is-invalid' : updateValidator.jobName.errors && updateValidator.jobName.touched}"  >
                      <div *ngIf="updateValidator.jobName.touched && updateValidator.jobName.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.jobName.errors.required">{{'Common.Validation.Required' | translate }}</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="txtUpdateDescription" class="font-weight-bold" >{{'JobsOffers.Description' | translate }}</label>
                      <textarea id="txtUpdateDescription" name="txtUpdateDescription" class= "form-control default" rows="3"  maxlength="300" formControlName="description" placeholder="{{'Common.Form.MaxLength' | translate:{'value': 'JobsOffers.Description' | translate , 'max':'300'} }}" [ngClass]="{'is-invalid' : updateValidator.description.errors && updateValidator.description.touched}"  ></textarea>
                      <div *ngIf="updateValidator.description.touched && updateValidator.description.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.description.errors.minlength || updateValidator.description.errors.maxlength">{{'Common.Validation.Maxlength' | translate:{'value':'300'} }}</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="rdbUpdateGender" class="font-weight-bold" >{{'JobsOffers.Gender' | translate }}<strong class="text-danger">*</strong></label>
                      <div class="form-check" >
                          <input id="rdbUpdateGender0" class="form-check-input" type="radio" name="gender" formControlName="gender" [value] ="0" [ngClass]="{'is-invalid' : updateValidator.gender.errors && updateValidator.gender.touched}">
                          <label class="form-check-label" for="rdbUpdateGender0">
                              {{'Common.Form.BothGender' | translate }}
                          </label>
                      </div>
                      <div class="form-check" >
                          <input id="rdbUpdateGender1" class="form-check-input" type="radio" name="gender" formControlName="gender" [value] ="1" [ngClass]="{'is-invalid' : updateValidator.gender.errors && updateValidator.gender.touched}">
                          <label class="form-check-label text-sky" for="rdbUpdateGender1">
                              <i class="fa fa-male mr-1"></i>{{'Common.Form.Males' | translate }}
                          </label>
                      </div>
                      <div class="form-check">
                          <input id="rdbUpdateGender2" class="form-check-input" type="radio" name="gender" formControlName="gender" [value] ="2" [ngClass]="{'is-invalid' : updateValidator.gender.errors && updateValidator.gender.touched}" >
                          <label class="form-check-label text-pink" for="rdbUpdateGender2">
                              <i class="fa fa-female mr-1"></i>{{'Common.Form.Females' | translate }}
                          </label>
                      </div>
                      <div *ngIf="updateValidator.gender.touched && updateValidator.gender.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.gender.errors.required">{{'Common.Validation.Required' | translate }}</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="txtUpdateJobsNumber" class="font-weight-bold" >{{'JobsOffers.JobsNumber' | translate }}<strong class="text-danger">*</strong></label>
                      <input id="txtUpdateJobsNumber" name="txtUpdateJobsNumber"   type="number" step="1"  class= "form-control default"  formControlName="jobsNumber" placeholder= "0" [ngClass]="{'is-invalid' : updateValidator.jobsNumber.errors && updateValidator.jobsNumber.touched}"  >
                      <div *ngIf="updateValidator.jobsNumber.touched && updateValidator.jobsNumber.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.jobsNumber.errors.required">{{'Common.Validation.Required' | translate }}</div>
                          <div *ngIf="updateValidator.jobsNumber.errors.pattern">{{'Common.Validation.Pattern' | translate }}</div>
                      </div>
                  </div>
                  <div class="form-row">
                      <div class="form-group col-lg-6">
                          <label for="dtpkrUpdateStartDate" class="font-weight-bold" >{{'JobsOffers.StartDate' | translate }}<strong class="text-danger">*</strong></label>
                          <div class="input-group">
                              <input ngbDatepicker #dtpkrUpdateStartDate="ngbDatepicker" [maxDate]="maxDate" [minDate]="minDate" [firstDayOfWeek]="0" class="form-control"  formControlName="startDate" readonly (click)="dtpkrUpdateStartDate?.toggle()" [ngClass]="{'is-invalid' : updateValidator.startDate.errors && updateValidator.startDate.touched}" >
                              <div class="input-group-append">
                                  <button class="btn btn-outline-secondary calendar" (click)="dtpkrUpdateStartDate?.toggle()" type="button"><i class="fa fa-calendar"></i></button>
                              </div>
                              <div *ngIf="updateValidator.startDate.touched && updateValidator.startDate.errors" class="invalid-feedback">
                                  <div *ngIf="updateValidator.startDate.errors.required">{{'Common.Validation.Required' | translate }}</div>
                              </div>
                          </div>
                      </div>
                      <div class="form-group col-lg-6">
                          <label for="dtpkrUpdateEndDate" class="font-weight-bold" >{{'JobsOffers.EndDate' | translate }}<strong class="text-danger">*</strong>&nbsp;<span *ngIf="totalDays !== ''" class="badge badge-pill badge-info">عدد الأيام : {{totalDays}}</span></label>
                          <div class="input-group">
                              <input ngbDatepicker #dtpkrUpdateEndDate="ngbDatepicker" (dateSelect)="onDateSelect()" [maxDate]="maxDate" [minDate]="minDate" [firstDayOfWeek]="0" class="form-control"  formControlName="endDate" readonly (click)="dtpkrUpdateEndDate?.toggle()" [ngClass]="{'is-invalid' : updateValidator.endDate.errors && updateValidator.endDate.touched}" >
                              <div class="input-group-append">
                                  <button class="btn btn-outline-secondary calendar" (click)="dtpkrUpdateEndDate?.toggle()" type="button"><i class="fa fa-calendar"></i></button>
                              </div>
                              <div *ngIf="updateValidator.endDate.touched && updateValidator.endDate.errors" class="invalid-feedback">
                                  <div *ngIf="updateValidator.endDate.errors.required">{{'Common.Validation.Required' | translate }}</div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div *ngIf="updateValidator.endDate.touched && updateJobsOfferForm.hasError('datesLessThan')" class="form-group">
                      <div *ngIf="updateValidator.endDate.touched && updateJobsOfferForm.hasError('datesLessThan')" class="alert alert-alert-danger" role="alert">
                          <div>يجب أن يكون تاريخ بداية الفترة قبل تاريخ نهاية الفترة</div>
                      </div>
                  </div>
                  <div *ngIf="updateJobsOfferForm.hasError('selectedDateIsBeforeToday')" class="form-group">
                      <div *ngIf="updateJobsOfferForm.hasError('selectedDateIsBeforeToday')" class="alert alert-danger" role="alert">
                          <div>يجب أن تكون تواريخ فترة العمل بعد تاريخ اليوم الحالي</div>
                      </div>
                  </div>

                  <div class="form-group">
                    <div class="alert alert-warning py-0" role="alert">
                        <strong>حسب لوائح العمل المرن:</strong>
                        <div>
                          <ul class="mb-1">
                            <li>يجب أن لا تقل ساعات العمل عن 3 ساعات باليوم الواحد.</li>
                            <li>يجب أن لا تتجاوز ساعات العمل عن 8 ساعات باليوم الواحد.</li>
                          </ul>
                        </div>
                    </div>
                  </div>
                  <div class="form-row">
                      <div class="form-group col-lg-6">
                          <label for="tmpkrUpdateStartTime" class="font-weight-bold" >{{'JobsOffers.StartTime' | translate }}<strong class="text-danger">*</strong></label>
                          <div class="input-group">
                              <ngb-timepicker dir="ltr" formControlName="startTime" [minuteStep]="5" [meridian]="true" [size]="'small'" [ngClass]="{'is-invalid' : updateValidator.startTime.errors && updateValidator.startTime.touched}"></ngb-timepicker>
                              <div *ngIf="updateValidator.startTime.touched && updateValidator.startTime.errors" class="invalid-feedback">
                                  <div *ngIf="updateValidator.startTime.errors.required">{{'Common.Validation.Required' | translate }}</div>
                              </div>
                          </div>
                      </div>
                      <div class="form-group col-lg-6">
                          <label for="tmpkrUpdateEndTime" class="font-weight-bold" >{{'JobsOffers.EndTime' | translate }}<strong class="text-danger">*</strong>&nbsp;<span *ngIf="totalHours !== ''" class="badge badge-pill badge-info">عدد الساعات : {{totalHours}}</span></label>
                          <div class="input-group">
                              <ngb-timepicker dir="ltr" formControlName="endTime" [minuteStep]="5" [meridian]="true" [size]="'small'" [ngClass]="{'is-invalid' : updateValidator.endTime.errors && updateValidator.endTime.touched}"></ngb-timepicker>
                              <div *ngIf="updateValidator.endTime.touched && updateValidator.endTime.errors" class="invalid-feedback">
                                  <div *ngIf="updateValidator.endTime.errors.required">{{'Common.Validation.Required' | translate }}</div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div *ngIf="updateValidator.endTime.touched && updateJobsOfferForm.hasError('timeLessThan')" class="form-group">
                      <div *ngIf="updateValidator.endTime.touched && updateJobsOfferForm.hasError('timeLessThan')" class="alert alert-warning" role="alert">
                          <div>يجب أن يكون توقيت بداية الفترة قبل توقيت نهاية الفترة</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="txtUpdateSalary" class="font-weight-bold" >{{'JobsOffers.Salary' | translate }}<strong class="text-danger">*</strong></label>
                      <div class="input-group">
                          <input id="txtUpdateSalary" name="txtUpdateSalary"  class= "form-control default"  formControlName="salary" placeholder="0.00" [ngClass]="{'is-invalid' : updateValidator.salary.errors && updateValidator.salary.touched}"  >
                          <div class="input-group-prepend">
                              <span class="input-group-text" id="basic-updateon1">ر.س</span>
                          </div>
                      </div>
                      <div *ngIf="updateValidator.salary.touched && updateValidator.salary.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.salary.errors.required">{{'Common.Validation.Required' | translate }}</div>
                          <div *ngIf="updateValidator.salary.errors.pattern">{{'Common.Validation.Pattern' | translate }}</div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="updateId" class="font-weight-bold" >{{'JobsOffers.Skills' | translate }}</label>
                      <ng-select [loading]="isLoadingOptions" bindValue="id" bindLabel="name" [multiple]="true" [items]="jobsOffersSkillsOptions"
                              formControlName="jobsOffersSkills" [clearable]="false" [selectableGroup]="true" [closeOnSelect]="false"
                              placeholder="{{'Common.Form.SelectFromMenu' | translate:{'value': 'Common.Form.YourOptions' | translate} }}" class="custom">
                          <ng-template ng-loadingspinner-tmp><div class="lds-ellipsis mx-2"><div></div><div></div><div></div><div></div></div></ng-template>
                          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                              <input id="item-{{index}}" type="checkbox" [checked]="item$.selected"/>&nbsp;{{item.name}}
                          </ng-template>
                      </ng-select>
                      <div *ngIf="updateValidator.jobsOffersSkills.touched && updateValidator.jobsOffersSkills.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.jobsOffersSkills.errors.minlength || updateValidator.jobsOffersSkills.errors.maxlength" > </div>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="rdbUpdatePrivacy" class="font-weight-bold" >{{'JobsOffers.Privacy' | translate }}<strong class="text-danger">*</strong></label>
                      <div class="form-check form-check-inline">
                          <input id="rdbUpdatePrivacy2" class="form-check-input" type="radio" name="privacy" formControlName="privacy" [value]="privacyJobEnum.Everyone" [ngClass]="{'is-invalid' : updateValidator.privacy.errors && updateValidator.privacy.touched}">
                          <label class="form-check-label pl-1" for="rdbUpdatePrivacy2">{{'JobsOffers.Everyone' | translate }}</label>
                      </div>
                      <div class="form-check form-check-inline">
                          <input id="rdbUpdatePrivacy1" class="form-check-input" type="radio" name="privacy" formControlName="privacy" [value]="privacyJobEnum.OnlyInvitation" [ngClass]="{'is-invalid' : updateValidator.privacy.errors && updateValidator.privacy.touched}">
                          <label class="form-check-label pl-1" for="rdbUpdatePrivacy1">{{'JobsOffers.OnlyInvitation' | translate }}</label>
                      </div>
                      <div *ngIf="updateValidator.privacy.touched && updateValidator.privacy.errors" class="invalid-feedback">
                          <div *ngIf="updateValidator.privacy.errors.required">{{'Common.Validation.Required' | translate }}</div>
                      </div>
                  </div>
              </div>

              <div class="card-footer text-right">
                  <button id="btnUpdateJobsOffer" class="btn btn-primary" [disabled]="isSubmitting" type="submit">
                      <i *ngIf="isSubmitting" class='fa fa-circle-o-notch fa-spin'></i>&nbsp;{{!isSubmitting ? '' : 'Common.Data.SendingData'  | translate }}
                      <i *ngIf="!isSubmitting" class="fa fa-save" ></i>&nbsp;{{isSubmitting ? '' : 'Common.CRUD.Update' | translate}}&nbsp;
                  </button>
              </div>
          </div>
      </form>
      <!-- End Normal Update BootStrap CardForm Form -->
  </div>
</article>


