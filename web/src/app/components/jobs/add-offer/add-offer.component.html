<!-- ======= Breadcrumbs ======= -->
<section id="breadcrumbs" class="breadcrumbs">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h2>{{'JobsOffers.AddJobsOfferTitle' | translate }}</h2>
            </div>
            <ol>
                
                <li><a [routerLink]="['/jobs/manage']">{{'JobsOffers.ManageJobs' | translate }}</a></li>
            </ol>
        </div>
    </div>
</section><!-- End Breadcrumbs -->

<article id="profile" class="content">
    <div class="container">
        <!-- start Normal Add BootStrap CardForm Form -->
        <form id ="formAddJobsOffer" [formGroup]="addJobsOfferForm" (ngSubmit)="addNewJobOffer()">
            <div class="card">
                <div class="card-header">
                    <h5><span class="fa fa-plus"></span>&nbsp;{{'JobsOffers.AddJobsOfferTitle' | translate }}</h5>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="ddlJobCategoryId" class="font-weight-bold" >{{'JobsOffers.JobCategoryId' | translate }}<strong class="text-danger">*</strong></label>
                        <select id="ddlJobCategoryId" name="ddlJobCategoryId" formControlName="jobCategoryId" class="form-control" [ngClass]="{'is-invalid' : addValidator.jobCategoryId.errors && addValidator.jobCategoryId.touched }">
                            <option value="" disabled>{{'Common.Form.ChooseFromMenu' | translate }}</option>
                            <option *ngFor="let jobCategory of jobsCategoriesOptions" value="{{jobCategory.id}}">{{jobCategory.name}}</option>
                        </select>
                        <div *ngIf="addValidator.jobCategoryId.touched && addValidator.jobCategoryId.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.jobCategoryId.errors.required">{{'Common.Validation.SelectedRequiredMsg' | translate }}</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="ddlCityId" class="font-weight-bold" >{{'JobsOffers.CityId' | translate }}<strong class="text-danger">*</strong></label>
                        <select id="ddlCityId" name="ddlCityId" formControlName="cityId" class="form-control" [ngClass]="{'is-invalid' : addValidator.cityId.errors && addValidator.cityId.touched }">
                            <option value="" disabled>{{'Common.Form.ChooseFromMenu' | translate }}</option>
                            <option *ngFor="let city of citiesOptions" value="{{city.id}}">{{city.name}}</option>
                        </select>
                        <div *ngIf="addValidator.cityId.touched && addValidator.cityId.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.cityId.errors.required">{{'Common.Validation.SelectedRequiredMsg' | translate }}</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="txtAddJobName" class="font-weight-bold" >{{'JobsOffers.JobName' | translate }}<strong class="text-danger">*</strong></label>
                        <input id="txtAddJobName" name="txtAddJobName"  class= "form-control default"  maxlength="80" formControlName="jobName" placeholder="{{'JobsOffers.JobNameEmp' | translate }}" [ngClass]="{'is-invalid' : addValidator.jobName.errors && addValidator.jobName.touched}"  >
                        <div *ngIf="addValidator.jobName.touched && addValidator.jobName.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.jobName.errors.required">{{'Common.Validation.Required' | translate }}</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="txtAddDescription" class="font-weight-bold" >{{'JobsOffers.Description' | translate }}</label>
                        <textarea id="txtAddDescription" name="txtAddDescription" class= "form-control animated" AutoSize  [maximumHeight]="250" [minHeight]="30" rows="2"  maxlength="300" formControlName="description" placeholder="{{'Common.Form.MaxLength' | translate:{'value': 'JobsOffers.Description' | translate , 'max':'300'} }}" [ngClass]="{'is-invalid' : addValidator.description.errors && addValidator.description.touched}"  ></textarea>
                        <div *ngIf="addValidator.description.touched && addValidator.description.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.description.errors.minlength || addValidator.description.errors.maxlength">{{'Common.Validation.Maxlength' | translate:{'value':'300'} }}</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rdbAddGender" class="font-weight-bold" >{{'JobsOffers.Gender' | translate }}<strong class="text-danger">*</strong></label>
                        <div class="form-check" >
                            <input id="rdbAddGender0" class="form-check-input" type="radio" name="gender" formControlName="gender" [value] ="0" [ngClass]="{'is-invalid' : addValidator.gender.errors && addValidator.gender.touched}">
                            <label class="form-check-label" for="rdbAddGender0">
                                {{'Common.Form.BothGender' | translate }}
                            </label>
                        </div>
                        <div class="form-check" >
                            <input id="rdbAddGender1" class="form-check-input" type="radio" name="gender" formControlName="gender" [value] ="1" [ngClass]="{'is-invalid' : addValidator.gender.errors && addValidator.gender.touched}">
                            <label class="form-check-label text-sky" for="rdbAddGender1">
                                <i class="fa fa-male mr-1"></i>{{'Common.Form.Males' | translate }}
                            </label>
                        </div>
                        <div class="form-check">
                            <input id="rdbAddGender2" class="form-check-input" type="radio" name="gender" formControlName="gender" [value] ="2" [ngClass]="{'is-invalid' : addValidator.gender.errors && addValidator.gender.touched}" >
                            <label class="form-check-label text-pink" for="rdbAddGender2">
                                <i class="fa fa-female mr-1"></i>{{'Common.Form.Females' | translate }}
                            </label>
                        </div>
                        <div *ngIf="addValidator.gender.touched && addValidator.gender.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.gender.errors.required">{{'Common.Validation.Required' | translate }}</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="txtAddJobsNumber" class="font-weight-bold" >{{'JobsOffers.JobsNumber' | translate }}<strong class="text-danger">*</strong></label>
                        <input id="txtAddJobsNumber" name="txtAddJobsNumber"  min="1" type="number" step="1"  class= "form-control default"  formControlName="jobsNumber" placeholder= "0" [ngClass]="{'is-invalid' : addValidator.jobsNumber.errors && addValidator.jobsNumber.touched}"  >
                        <small *ngIf="employmentBagsBalance" class="form-text text-muted table-info mt-0">{{employmentBagsBalance?.message}} | يمكنك اضافة رصيد <a  [routerLink]="['/businesses/packages']" >من هنا</a></small>
                        <div *ngIf="addValidator.jobsNumber.touched && addValidator.jobsNumber.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.jobsNumber.errors.required">{{'Common.Validation.Required' | translate }}</div>
                            <div *ngIf="addValidator.jobsNumber.errors.pattern">{{'Common.Validation.Pattern' | translate }}</div>
                            <div *ngIf="addValidator.jobsNumber.errors.max">لا يتوفر لديك رصيد كافي من حقائب التوظيف</div>
                        </div>
                    </div>
                    <div class="form-group">
                      <div class="alert alert-warning py-0 px-2" role="alert">
                          <strong>حسب لوائح العمل المرن:</strong>
                          <div>
                            <ul class="mb-1 pl-3">
                              <li>يجب أن لا تقل ساعات العمل عن {{marnMinHourPerDay}} ساعات باليوم الواحد.</li>
                              <li>يجب أن لا تزيد ساعات العمل عن {{marnMaxHourPerDay}} ساعات باليوم الواحد.</li>
                              <li>يجب أن لا يزيد اجمالي عدد ساعات العمل الأسبوعية عن 24 ساعة.</li>
                              <li>يجب أن لا يزيد اجمالي عدد ساعات العمل الشهرية عن 95 ساعة.</li>
                              <li>أن لا يقل سعر الساعة الواحدة عن 25 ريال/ساعة.</li>
                            </ul>
                          </div>
                      </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-lg-6">
                            <label for="dtpkrAddStartDate" class="font-weight-bold" >{{'JobsOffers.StartDate' | translate }}<strong class="text-danger">*</strong></label>
                            <div class="input-group">
                                <input ngbDatepicker #dtpkrAddStartDate="ngbDatepicker" [maxDate]="maxDate" [minDate]="minDate" [firstDayOfWeek]="0" class="form-control"  formControlName="startDate" readonly (click)="dtpkrAddStartDate?.toggle()" [ngClass]="{'is-invalid' : addValidator.startDate.errors && addValidator.startDate.touched}" >
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary calendar" (click)="dtpkrAddStartDate?.toggle()" type="button"><i class="fa fa-calendar"></i></button>
                                </div>
                                <div *ngIf="addValidator.startDate.touched && addValidator.startDate.errors" class="invalid-feedback">
                                    <div *ngIf="addValidator.startDate.errors.required">{{'Common.Validation.Required' | translate }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-lg-6">
                            <label for="dtpkrAddEndDate" class="font-weight-bold" >{{'JobsOffers.EndDate' | translate }}<strong class="text-danger">*</strong>&nbsp;<span *ngIf="totalDays !== 0" class="badge badge-pill badge-info">عدد الأيام : {{totalDays}}</span></label>
                            <div class="input-group">
                                <input ngbDatepicker #dtpkrAddEndDate="ngbDatepicker" (dateSelect)="onDateSelect()" [maxDate]="maxDate" [minDate]="minDate" [firstDayOfWeek]="0" class="form-control"  formControlName="endDate" readonly (click)="dtpkrAddEndDate?.toggle()" [ngClass]="{'is-invalid' : addValidator.endDate.errors && addValidator.endDate.touched}" >
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary calendar" (click)="dtpkrAddEndDate?.toggle()" type="button"><i class="fa fa-calendar"></i></button>
                                </div>
                                <div *ngIf="addValidator.endDate.touched && addValidator.endDate.errors" class="invalid-feedback">
                                    <div *ngIf="addValidator.endDate.errors.required">{{'Common.Validation.Required' | translate }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="addValidator.endDate.touched && addJobsOfferForm.hasError('datesLessThan')" class="form-group">
                        <div *ngIf="addValidator.endDate.touched && addJobsOfferForm.hasError('datesLessThan')" class="alert alert-danger" role="alert">
                            <div>يجب أن يكون تاريخ بداية الفترة قبل تاريخ نهاية الفترة</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-lg-6">
                            <label for="tmpkrAddStartTime" class="font-weight-bold" >{{'JobsOffers.StartTime' | translate }}<strong class="text-danger">*</strong></label>
                            <div class="input-group">
                                <ngb-timepicker dir="ltr" formControlName="startTime" [minuteStep]="5" [meridian]="true" [size]="'small'" [ngClass]="{'is-invalid' : addValidator.startTime.errors && addValidator.startTime.touched}"></ngb-timepicker>
                                <div *ngIf="addValidator.startTime.touched && addValidator.startTime.errors" class="invalid-feedback">
                                    <div *ngIf="addValidator.startTime.errors.required">{{'Common.Validation.Required' | translate }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-lg-6">
                            <label for="tmpkrAddEndTime" class="font-weight-bold" >{{'JobsOffers.EndTime' | translate }}<strong class="text-danger">*</strong>&nbsp;<span *ngIf="totalHours !== ''" class="badge badge-pill badge-info">عدد الساعات : {{totalHours}}</span></label>
                            <div class="input-group">
                                <ngb-timepicker dir="ltr" formControlName="endTime" [minuteStep]="5" [meridian]="true" [size]="'small'" [ngClass]="{'is-invalid' : addValidator.endTime.errors && addValidator.endTime.touched}"></ngb-timepicker>
                                <div *ngIf="addValidator.endTime.touched && addValidator.endTime.errors" class="invalid-feedback">
                                    <div *ngIf="addValidator.endTime.errors.required">{{'Common.Validation.Required' | translate }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="addValidator.endTime.touched && addJobsOfferForm.hasError('timeLessThan')" class="form-group">
                        <div *ngIf="addValidator.endTime.touched && addJobsOfferForm.hasError('timeLessThan')" class="alert alert-alert-danger" role="alert">
                            <div>يجب أن يكون توقيت بداية الفترة قبل توقيت نهاية الفترة</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="txtAddSalary" class="font-weight-bold" >{{'JobsOffers.Salary' | translate }}<strong class="text-danger">*</strong></label>
                        <div class="input-group">
                            <input id="txtAddSalary" name="txtAddSalary" min="0" type="number" step="25" class= "form-control"  formControlName="salary" placeholder="0.00" [ngClass]="{'is-invalid' : addValidator.salary.errors && addValidator.salary.touched}"  >
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">ر.س</span>
                            </div>
                        </div>
                        <div *ngIf="addValidator.salary.touched && addValidator.salary.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.salary.errors.required">{{'Common.Validation.Required' | translate }}</div>
                            <div *ngIf="addValidator.salary.errors.pattern">{{'Common.Validation.Pattern' | translate }}</div>
                        </div>
                    </div>
                    <div *ngIf="addValidator.salary.touched && addJobsOfferForm.hasError('salaryLessThanRequirements')" class="form-group">
                      <div *ngIf="addValidator.salary.touched && addJobsOfferForm.hasError('salaryLessThanRequirements')" class="alert alert-warning" role="alert">
                          <div>أقل راتب مسموح تحديده حسب الفتره التي تم اختيارها هو {{minSalaryRequirements | number : '1.2-2'}} ريال، وهو اجمالي عدد الساعات حسب الأيام المختارة مضروب في 25 ريال للساعة الواحدة</div>
                      </div>
                    </div>
                    <div class="form-group">
                        <label for="addId" class="font-weight-bold" >{{'JobsOffers.Skills' | translate }}</label>
                        <ng-select [loading]="isLoadingOptions" [disabled]="isLoadingOptions" bindValue="id" bindLabel="name" [multiple]="true" [items]="jobsOffersSkillsOptions"
                                formControlName="jobsOffersSkills" [clearable]="false" [selectableGroup]="true" [closeOnSelect]="false"
                                placeholder="{{'Common.Form.SelectFromMenu' | translate:{'value': 'Common.Form.YourOptions' | translate} }}" class="custom">
                            <ng-template ng-loadingspinner-tmp><div class="lds-ellipsis mx-2"><div></div><div></div><div></div><div></div></div></ng-template>
                            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                <input id="item-{{index}}" type="checkbox" [checked]="item$.selected"/>&nbsp;{{item.name}}
                            </ng-template>
                        </ng-select>
                        <div *ngIf="addValidator.jobsOffersSkills.touched && addValidator.jobsOffersSkills.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.jobsOffersSkills.errors.minlength || addValidator.jobsOffersSkills.errors.maxlength" > </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rdbAddPrivacy" class="font-weight-bold" >{{'JobsOffers.Privacy' | translate }}<strong class="text-danger">*</strong></label>
                        <div class="form-check form-check-inline">
                            <input id="rdbAddPrivacy2" class="form-check-input" type="radio" name="privacy" formControlName="privacy" [value]="privacyJobEnum.Everyone" [ngClass]="{'is-invalid' : addValidator.privacy.errors && addValidator.privacy.touched}">
                            <label class="form-check-label pl-1" for="rdbAddPrivacy2">{{'JobsOffers.Everyone' | translate }}</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input id="rdbAddPrivacy1" class="form-check-input" type="radio" name="privacy" formControlName="privacy" [value]="privacyJobEnum.OnlyInvitation" [ngClass]="{'is-invalid' : addValidator.privacy.errors && addValidator.privacy.touched}">
                            <label class="form-check-label pl-1" for="rdbAddPrivacy1">{{'JobsOffers.OnlyInvitation' | translate }}</label>
                        </div>
                        <div *ngIf="addValidator.privacy.touched && addValidator.privacy.errors" class="invalid-feedback">
                            <div *ngIf="addValidator.privacy.errors.required">{{'Common.Validation.Required' | translate }}</div>
                        </div>
                    </div>
                </div>

                <div class="card-footer text-right">
                    <button id="btnAddJobsOffer" class="btn btn-primary" [disabled]="isSubmitting" type="submit">
                        <i *ngIf="isSubmitting" class='fa fa-circle-o-notch fa-spin'></i>&nbsp;{{!isSubmitting ? '' : 'Common.Data.SendingData'  | translate }}
                        <i *ngIf="!isSubmitting" class="fa fa-save" ></i>&nbsp;{{isSubmitting ? '' : 'Common.CRUD.Add' | translate}}&nbsp;
                    </button>
                </div>
            </div>
        </form>
        <!-- End Normal Add BootStrap CardForm Form -->
    </div>
</article>


